<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iccDEV: Tools/CmdLine/IccPngDump/iccPngDump.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">iccDEV<span id="projectnumber">&#160;2.2.61</span>
   </div>
   <div id="projectbrief">iccDEV Tools</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dd/de2/a00320.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">iccPngDump.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;png.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../">IccCmm.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../">IccUtil.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../">IccDefs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../">IccProfLibVer.h</a>&quot;</code><br />
<code>#include &lt;zlib.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for iccPngDump.cpp:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../db/d53/a00321.png" border="0" usemap="#aTools_2CmdLine_2IccPngDump_2iccPngDump_8cpp" alt=""/></div>
<map name="aTools_2CmdLine_2IccPngDump_2iccPngDump_8cpp" id="aTools_2CmdLine_2IccPngDump_2iccPngDump_8cpp">
<area shape="rect" title=" " alt="" coords="434,5,635,45"/>
<area shape="rect" title=" " alt="" coords="5,93,85,119"/>
<area shape="poly" title=" " alt="" coords="434,43,280,65,99,96,99,91,280,60,433,38"/>
<area shape="rect" title=" " alt="" coords="110,93,183,119"/>
<area shape="poly" title=" " alt="" coords="435,48,198,95,197,90,434,43"/>
<area shape="rect" title=" " alt="" coords="207,93,270,119"/>
<area shape="poly" title=" " alt="" coords="464,48,284,95,283,90,463,43"/>
<area shape="rect" title=" " alt="" coords="255,313,321,339"/>
<area shape="poly" title=" " alt="" coords="435,47,389,66,350,95,332,118,317,144,299,201,291,256,290,299,284,299,286,255,294,199,312,142,327,115,346,91,387,62,433,42"/>
<area shape="rect" title=" " alt="" coords="361,93,431,119"/>
<area shape="poly" title=" " alt="" coords="503,48,430,89,427,84,500,43"/>
<area shape="rect" title=" " alt="" coords="455,93,526,119"/>
<area shape="poly" title=" " alt="" coords="526,47,506,83,502,80,522,44"/>
<area shape="rect" title=" " alt="" coords="551,93,609,119"/>
<area shape="poly" title=" " alt="" coords="548,44,569,80,564,83,543,47"/>
<area shape="rect" href="../../d6/d5b/a00026.html" title=" " alt="" coords="634,93,721,119"/>
<area shape="poly" title=" " alt="" coords="570,43,646,84,643,89,568,48"/>
<area shape="rect" href="../../d4/d81/a00110.html" title=" " alt="" coords="1092,460,1175,485"/>
<area shape="poly" title=" " alt="" coords="636,32,859,55,994,73,1133,96,1268,123,1390,156,1490,194,1529,215,1559,238,1580,261,1592,286,1593,312,1581,340,1556,365,1516,386,1466,406,1409,423,1289,449,1188,466,1188,461,1288,444,1407,417,1464,401,1514,381,1552,360,1576,337,1588,311,1587,287,1576,264,1556,242,1526,220,1488,199,1388,161,1267,128,1132,101,993,78,858,61,635,37"/>
<area shape="rect" href="../../d7/dce/a00143.html" title=" " alt="" coords="1687,313,1761,339"/>
<area shape="poly" title=" " alt="" coords="636,26,913,34,1256,47,1555,66,1654,78,1684,84,1700,91,1719,114,1731,141,1739,169,1742,198,1740,255,1733,300,1728,299,1735,254,1737,199,1734,170,1726,142,1714,117,1697,95,1683,89,1653,83,1555,72,1256,53,913,39,635,32"/>
<area shape="rect" href="../../dd/dad/a00005.html" title=" " alt="" coords="1768,93,1885,119"/>
<area shape="poly" title=" " alt="" coords="636,26,1116,45,1431,64,1750,91,1754,91,1754,96,1749,96,1431,69,1116,51,636,32"/>
<area shape="rect" title=" " alt="" coords="1910,93,1967,119"/>
<area shape="poly" title=" " alt="" coords="636,26,908,33,1266,46,1624,65,1777,77,1897,91,1896,96,1776,82,1624,70,1266,51,908,38,636,31"/>
<area shape="rect" href="../../d4/d51/a00017.html" title=" " alt="" coords="563,313,656,339"/>
<area shape="poly" title=" " alt="" coords="640,121,582,143,558,156,543,168,536,185,535,203,538,221,545,239,566,274,590,302,585,305,561,277,540,241,533,222,529,203,531,184,539,165,555,151,580,138,638,116"/>
<area shape="rect" title=" " alt="" coords="824,387,867,412"/>
<area shape="poly" title=" " alt="" coords="693,117,708,132,722,151,729,173,724,193,709,209,694,218,661,223,627,225,611,231,594,242,568,265,549,289,544,300,542,312,545,324,553,337,578,362,604,376,630,383,657,383,719,379,754,379,792,384,811,388,810,393,792,389,754,384,719,384,657,389,629,388,602,381,575,366,549,340,540,326,537,312,538,299,544,286,564,261,590,238,608,226,626,220,661,217,692,213,706,205,719,191,724,173,717,154,704,136,689,121"/>
<area shape="rect" href="../../d2/df5/a00137.html" title=" " alt="" coords="952,167,1027,192"/>
<area shape="poly" title=" " alt="" coords="721,115,939,164,938,169,720,120"/>
<area shape="poly" title=" " alt="" coords="721,106,863,115,1072,137,1191,154,1315,176,1438,204,1558,237,1634,269,1696,304,1693,308,1632,274,1556,243,1437,209,1314,181,1190,159,1071,142,863,121,721,112"/>
<area shape="rect" href="../../dc/dfe/a00125.html" title=" " alt="" coords="351,167,478,192"/>
<area shape="poly" title=" " alt="" coords="636,121,471,166,470,160,634,116"/>
<area shape="rect" title=" " alt="" coords="553,167,620,192"/>
<area shape="poly" title=" " alt="" coords="664,121,614,160,611,156,661,117"/>
<area shape="rect" title=" " alt="" coords="645,167,710,192"/>
<area shape="poly" title=" " alt="" coords="680,119,680,153,675,153,675,119"/>
<area shape="poly" title=" " alt="" coords="619,337,649,374,670,394,695,410,726,421,768,431,872,448,1078,466,1078,471,872,453,767,436,724,426,692,414,667,398,645,378,615,341"/>
<area shape="rect" href="../../d4/d3a/a00101.html" title=" " alt="" coords="705,387,780,412"/>
<area shape="poly" title=" " alt="" coords="632,336,710,378,708,382,630,341"/>
<area shape="poly" title=" " alt="" coords="648,336,812,385,810,390,646,341"/>
<area shape="rect" title=" " alt="" coords="1301,387,1360,412"/>
<area shape="poly" title=" " alt="" coords="656,329,1288,391,1287,396,656,335"/>
<area shape="rect" title=" " alt="" coords="1080,533,1155,559"/>
<area shape="poly" title=" " alt="" coords="1133,486,1125,521,1120,520,1128,485"/>
<area shape="rect" href="../../d5/d16/a00029.html" title=" " alt="" coords="1335,533,1462,559"/>
<area shape="poly" title=" " alt="" coords="1175,482,1344,527,1342,532,1174,488"/>
<area shape="rect" href="../../d7/d46/a00002.html" title=" " alt="" coords="1179,533,1311,559"/>
<area shape="poly" title=" " alt="" coords="1153,483,1217,523,1214,528,1150,488"/>
<area shape="rect" title=" " alt="" coords="1363,607,1434,632"/>
<area shape="poly" title=" " alt="" coords="1401,559,1401,593,1396,593,1396,559"/>
<area shape="poly" title=" " alt="" coords="781,405,1079,459,1078,464,780,410"/>
<area shape="poly" title=" " alt="" coords="952,185,868,191,762,203,662,219,622,230,593,242,565,261,545,282,536,307,539,338,552,380,562,395,580,410,619,427,674,441,740,451,813,459,960,467,1078,469,1078,474,960,472,813,464,740,457,673,446,618,432,577,414,558,399,547,382,533,339,530,306,541,279,561,257,591,238,620,225,661,214,762,197,867,186,952,180"/>
<area shape="poly" title=" " alt="" coords="984,194,863,376,858,373,979,191"/>
<area shape="poly" title=" " alt="" coords="1027,177,1140,178,1288,184,1362,191,1430,202,1487,218,1527,238,1551,260,1566,285,1568,312,1555,340,1543,351,1525,360,1478,376,1374,395,1373,390,1477,371,1523,355,1540,347,1551,337,1563,311,1561,287,1547,264,1524,242,1485,223,1429,208,1362,197,1287,189,1139,183,1027,183"/>
<area shape="rect" href="../../df/d6a/a00119.html" title=" " alt="" coords="311,240,377,265"/>
<area shape="poly" title=" " alt="" coords="952,187,392,249,391,244,952,182"/>
<area shape="rect" href="../../da/dec/a00080.html" title=" " alt="" coords="1432,313,1541,339"/>
<area shape="poly" title=" " alt="" coords="1027,180,1144,186,1295,197,1430,214,1477,225,1503,238,1511,253,1512,270,1503,302,1498,300,1507,269,1506,255,1499,242,1476,230,1429,219,1294,202,1144,191,1027,185"/>
<area shape="rect" href="../../da/d24/a00068.html" title=" " alt="" coords="1234,240,1329,265"/>
<area shape="poly" title=" " alt="" coords="1028,187,1222,234,1221,239,1026,192"/>
<area shape="rect" href="../../d7/d25/a00182.html" title=" " alt="" coords="1107,240,1210,265"/>
<area shape="poly" title=" " alt="" coords="1011,190,1112,232,1110,237,1009,194"/>
<area shape="rect" href="../../d5/df1/a00206.html" title=" " alt="" coords="772,240,908,265"/>
<area shape="poly" title=" " alt="" coords="960,194,871,236,868,231,957,190"/>
<area shape="rect" href="../../df/d03/a00062.html" title=" " alt="" coords="983,240,1083,265"/>
<area shape="poly" title=" " alt="" coords="992,191,1013,228,1009,231,987,194"/>
<area shape="rect" href="../../d1/da8/a00230.html" title=" " alt="" coords="604,240,748,265"/>
<area shape="poly" title=" " alt="" coords="952,190,733,239,732,234,951,185"/>
<area shape="rect" href="../../dc/d9a/a00218.html" title=" " alt="" coords="1353,240,1490,265"/>
<area shape="poly" title=" " alt="" coords="1027,184,1340,235,1339,241,1026,189"/>
<area shape="poly" title=" " alt="" coords="337,267,308,304,303,301,333,264"/>
<area shape="poly" title=" " alt="" coords="358,264,393,295,445,336,509,378,580,409,622,420,679,430,818,447,1078,466,1078,471,817,452,678,435,621,426,578,415,506,382,442,340,389,299,354,268"/>
<area shape="poly" title=" " alt="" coords="1476,341,1433,377,1404,397,1373,414,1326,433,1277,448,1189,467,1187,461,1276,443,1324,428,1371,410,1401,393,1430,373,1473,337"/>
<area shape="poly" title=" " alt="" coords="1432,336,881,397,880,391,1432,331"/>
<area shape="poly" title=" " alt="" coords="1463,341,1370,383,1368,378,1461,336"/>
<area shape="poly" title=" " alt="" coords="1315,263,1441,306,1440,311,1313,268"/>
<area shape="poly" title=" " alt="" coords="1196,263,1238,280,1287,306,1335,341,1356,362,1374,385,1390,419,1399,456,1403,519,1398,520,1394,456,1385,421,1370,388,1352,365,1332,345,1284,311,1236,285,1194,268"/>
<area shape="poly" title=" " alt="" coords="1185,263,1215,283,1229,296,1240,312,1251,339,1258,367,1263,425,1260,479,1254,520,1248,519,1255,478,1258,425,1253,368,1246,341,1235,315,1225,300,1211,287,1182,268"/>
<area shape="poly" title=" " alt="" coords="1135,268,880,385,878,380,1132,263"/>
<area shape="poly" title=" " alt="" coords="1137,242,1035,199,1037,194,1139,237"/>
<area shape="rect" href="../../d8/d41/a00038.html" title=" " alt="" coords="1086,313,1205,339"/>
<area shape="poly" title=" " alt="" coords="1159,266,1153,300,1147,299,1154,265"/>
<area shape="rect" title=" " alt="" coords="1009,387,1087,412"/>
<area shape="poly" title=" " alt="" coords="1178,264,1197,278,1214,297,1223,318,1223,329,1218,340,1194,364,1164,381,1132,392,1101,397,1100,392,1131,386,1162,376,1191,360,1214,337,1218,328,1218,319,1209,300,1193,282,1175,268"/>
<area shape="poly" title=" " alt="" coords="1147,339,1138,447,1133,446,1142,339"/>
<area shape="poly" title=" " alt="" coords="1098,341,880,392,879,387,1097,336"/>
<area shape="poly" title=" " alt="" coords="1176,336,1289,379,1287,384,1174,341"/>
<area shape="poly" title=" " alt="" coords="1131,341,1077,380,1074,376,1128,337"/>
<area shape="poly" title=" " alt="" coords="804,268,660,312,659,307,802,263"/>
<area shape="poly" title=" " alt="" coords="839,266,830,299,829,338,838,373,833,374,824,339,825,298,833,265"/>
<area shape="poly" title=" " alt="" coords="870,237,959,196,961,201,872,242"/>
<area shape="poly" title=" " alt="" coords="858,263,1022,376,1018,381,855,268"/>
<area shape="poly" title=" " alt="" coords="983,265,670,317,669,312,983,260"/>
<area shape="poly" title=" " alt="" coords="1020,268,873,380,869,376,1016,264"/>
<area shape="poly" title=" " alt="" coords="1083,263,1148,282,1217,311,1268,343,1310,376,1306,380,1265,347,1215,316,1147,287,1082,268"/>
<area shape="poly" title=" " alt="" coords="1031,241,1009,204,1014,202,1035,239"/>
<area shape="poly" title=" " alt="" coords="1053,263,1117,303,1114,308,1050,268"/>
<area shape="poly" title=" " alt="" coords="1037,266,1048,373,1043,373,1032,266"/>
<area shape="poly" title=" " alt="" coords="667,267,631,305,628,301,663,264"/>
<area shape="poly" title=" " alt="" coords="623,268,584,286,567,298,553,315,544,336,544,352,552,365,566,376,609,394,655,409,691,420,738,429,854,446,1078,465,1078,471,854,451,737,435,690,425,654,415,607,399,564,381,548,369,539,354,538,335,548,312,563,295,581,281,621,263"/>
<area shape="poly" title=" " alt="" coords="683,265,699,300,712,319,727,337,769,366,812,385,810,390,766,370,724,341,708,322,695,302,678,267"/>
<area shape="poly" title=" " alt="" coords="733,237,938,191,939,196,734,242"/>
<area shape="poly" title=" " alt="" coords="707,263,1007,379,1005,384,705,268"/>
<area shape="poly" title=" " alt="" coords="1434,264,1469,301,1465,305,1430,267"/>
<area shape="poly" title=" " alt="" coords="1719,341,1690,378,1668,398,1644,414,1606,428,1555,439,1429,456,1297,467,1189,472,1188,467,1297,462,1429,451,1554,434,1605,423,1641,410,1665,394,1686,375,1715,337"/>
<area shape="poly" title=" " alt="" coords="1744,337,1763,352,1780,370,1790,391,1790,403,1785,413,1755,447,1719,475,1680,497,1638,514,1552,536,1476,546,1475,540,1551,531,1636,509,1678,492,1717,471,1751,443,1780,411,1785,401,1785,392,1776,373,1759,356,1741,341"/>
<area shape="poly" title=" " alt="" coords="1687,337,1374,393,1373,388,1686,331"/>
<area shape="rect" title=" " alt="" coords="1712,387,1771,412"/>
<area shape="poly" title=" " alt="" coords="1729,338,1738,373,1733,374,1724,340"/>
<area shape="poly" title=" " alt="" coords="426,190,457,225,499,263,535,286,571,305,569,310,532,291,496,267,453,229,422,194"/>
</map>
</div>
</div>
<p><a href="">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6ce959f9b21d0b315a7426c935664fd2" id="r_a6ce959f9b21d0b315a7426c935664fd2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de2/a00320.html#a6ce959f9b21d0b315a7426c935664fd2">BAIL_OUT</a>(msg)&#160;&#160;&#160;do { <a class="el" href="../../de/dd7/a00362.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(msg); <a class="el" href="../../de/dd7/a00362.html#aa1520ab44c54ca111c5548ee776e6d21">TRAP</a>(); } while (0)</td></tr>
<tr class="separator:a6ce959f9b21d0b315a7426c935664fd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ebf4c3b4fb05d6f9094089ded75cbdd" id="r_a7ebf4c3b4fb05d6f9094089ded75cbdd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de2/a00320.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(msg)&#160;&#160;&#160;do { fprintf(stderr, &quot;[ERROR] %s\n&quot;, msg); } while (0)</td></tr>
<tr class="separator:a7ebf4c3b4fb05d6f9094089ded75cbdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c892b03810d63b4565fd9efa659e93a" id="r_a4c892b03810d63b4565fd9efa659e93a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de2/a00320.html#a4c892b03810d63b4565fd9efa659e93a">PNG_ICC_PROFILE_CAST</a>&#160;&#160;&#160;(png_bytepp)</td></tr>
<tr class="memdesc:a4c892b03810d63b4565fd9efa659e93a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Core and external libraries necessary for the fuzzer functionality.  <br /></td></tr>
<tr class="separator:a4c892b03810d63b4565fd9efa659e93a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1520ab44c54ca111c5548ee776e6d21" id="r_aa1520ab44c54ca111c5548ee776e6d21"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de2/a00320.html#aa1520ab44c54ca111c5548ee776e6d21">TRAP</a>()&#160;&#160;&#160;abort()</td></tr>
<tr class="separator:aa1520ab44c54ca111c5548ee776e6d21"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a098055709d5cb30a1f1d6af66fb58aaf" id="r_a098055709d5cb30a1f1d6af66fb58aaf"><td class="memItemLeft" align="right" valign="top">typedef png_bytep&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de2/a00320.html#a098055709d5cb30a1f1d6af66fb58aaf">png_icc_profilep</a></td></tr>
<tr class="separator:a098055709d5cb30a1f1d6af66fb58aaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a68c8896e912c6f58bb27f84607813a2c" id="r_a68c8896e912c6f58bb27f84607813a2c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de2/a00320.html#a68c8896e912c6f58bb27f84607813a2c">ExtractIccProfile</a> (png_structp png_ptr, png_infop info_ptr, unsigned char **pProfMem, unsigned int *nLen)</td></tr>
<tr class="separator:a68c8896e912c6f58bb27f84607813a2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aafc2a7aabb3eed6cc2d556ff91654d" id="r_a7aafc2a7aabb3eed6cc2d556ff91654d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de2/a00320.html#a7aafc2a7aabb3eed6cc2d556ff91654d">InjectIccProfile</a> (const std::string &amp;inputPng, const std::string &amp;iccFile, const std::string &amp;outputPng)</td></tr>
<tr class="separator:a7aafc2a7aabb3eed6cc2d556ff91654d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97" id="r_a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de2/a00320.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7431d1954b02d2a2d01ad5c9c66a7fba" id="r_a7431d1954b02d2a2d01ad5c9c66a7fba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de2/a00320.html#a7431d1954b02d2a2d01ad5c9c66a7fba">PrintIccProfileInfo</a> (const unsigned char *pProfMem, unsigned int nLen, const char *outputFile)</td></tr>
<tr class="separator:a7431d1954b02d2a2d01ad5c9c66a7fba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74d0f5b1eb5a544bca55f8741475a463" id="r_a74d0f5b1eb5a544bca55f8741475a463"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de2/a00320.html#a74d0f5b1eb5a544bca55f8741475a463">PrintPngInfo</a> (png_structp png_ptr, png_infop info_ptr)</td></tr>
<tr class="separator:a74d0f5b1eb5a544bca55f8741475a463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae802948b6c816e4983b52a4018e79f43" id="r_ae802948b6c816e4983b52a4018e79f43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de2/a00320.html#ae802948b6c816e4983b52a4018e79f43">safe_exit</a> (const char *reason)</td></tr>
<tr class="separator:ae802948b6c816e4983b52a4018e79f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ae07f63d6b390e42068d941038dadf2" id="r_a5ae07f63d6b390e42068d941038dadf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/de2/a00320.html#a5ae07f63d6b390e42068d941038dadf2">Usage</a> ()</td></tr>
<tr class="separator:a5ae07f63d6b390e42068d941038dadf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6ce959f9b21d0b315a7426c935664fd2" name="a6ce959f9b21d0b315a7426c935664fd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ce959f9b21d0b315a7426c935664fd2">&#9670;&#160;</a></span>BAIL_OUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BAIL_OUT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg</td><td>)</td>
          <td>&#160;&#160;&#160;do { <a class="el" href="../../de/dd7/a00362.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(msg); <a class="el" href="../../de/dd7/a00362.html#aa1520ab44c54ca111c5548ee776e6d21">TRAP</a>(); } while (0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7ebf4c3b4fb05d6f9094089ded75cbdd" name="a7ebf4c3b4fb05d6f9094089ded75cbdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ebf4c3b4fb05d6f9094089ded75cbdd">&#9670;&#160;</a></span>LOG_ERROR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_ERROR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg</td><td>)</td>
          <td>&#160;&#160;&#160;do { fprintf(stderr, &quot;[ERROR] %s\n&quot;, msg); } while (0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4c892b03810d63b4565fd9efa659e93a" name="a4c892b03810d63b4565fd9efa659e93a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c892b03810d63b4565fd9efa659e93a">&#9670;&#160;</a></span>PNG_ICC_PROFILE_CAST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PNG_ICC_PROFILE_CAST&#160;&#160;&#160;(png_bytepp)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Core and external libraries necessary for the fuzzer functionality. </p>
<p>This section includes the necessary headers for the Foundation framework, UIKit, Core Graphics, standard input/output, standard library, memory management, mathematical functions, Boolean type, floating-point limits, and string functions. These libraries support image processing, UI interaction, and basic C operations essential for the application. </p>

</div>
</div>
<a id="aa1520ab44c54ca111c5548ee776e6d21" name="aa1520ab44c54ca111c5548ee776e6d21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1520ab44c54ca111c5548ee776e6d21">&#9670;&#160;</a></span>TRAP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRAP</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;abort()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a098055709d5cb30a1f1d6af66fb58aaf" name="a098055709d5cb30a1f1d6af66fb58aaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a098055709d5cb30a1f1d6af66fb58aaf">&#9670;&#160;</a></span>png_icc_profilep</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef png_bytep <a class="el" href="../../dd/de2/a00320.html#a098055709d5cb30a1f1d6af66fb58aaf">png_icc_profilep</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a68c8896e912c6f58bb27f84607813a2c" name="a68c8896e912c6f58bb27f84607813a2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68c8896e912c6f58bb27f84607813a2c">&#9670;&#160;</a></span>ExtractIccProfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ExtractIccProfile </td>
          <td>(</td>
          <td class="paramtype">png_structp&#160;</td>
          <td class="paramname"><em>png_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">png_infop&#160;</td>
          <td class="paramname"><em>info_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char **&#160;</td>
          <td class="paramname"><em>pProfMem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>nLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extracts the ICC profile from a PNG image.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">png_ptr</td><td>Pointer to the PNG structure. </td></tr>
    <tr><td class="paramname">info_ptr</td><td>Pointer to the PNG info structure. </td></tr>
    <tr><td class="paramname">pProfMem</td><td>Output pointer to store the ICC profile data. </td></tr>
    <tr><td class="paramname">nLen</td><td>Output length of the extracted ICC profile. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on failure.</dd></dl>
<p>Extracts the embedded ICC profile from a PNG image.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">png_ptr</td><td>Pointer to the PNG read structure. </td></tr>
    <tr><td class="paramname">info_ptr</td><td>Pointer to the PNG info structure. </td></tr>
    <tr><td class="paramname">pProfMem</td><td>Output pointer to store the ICC profile data. </td></tr>
    <tr><td class="paramname">nLen</td><td>Output variable to store the profile data length. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if an ICC profile is found and extracted successfully, 0 otherwise. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  448</span>                                                                                                             {</div>
<div class="line"><span class="lineno">  449</span>    png_charp profile_name = NULL;</div>
<div class="line"><span class="lineno">  450</span>    <span class="keywordtype">int</span> compression_type = 0;</div>
<div class="line"><span class="lineno">  451</span>    png_bytep profile_data_raw = NULL;</div>
<div class="line"><span class="lineno">  452</span>    png_uint_32 profile_length = 0;</div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>    <span class="keywordflow">if</span> (png_get_iCCP(png_ptr, info_ptr, &amp;profile_name, &amp;compression_type,</div>
<div class="line"><span class="lineno">  455</span>                     (png_bytepp)&amp;profile_data_raw, &amp;profile_length)) {</div>
<div class="line"><span class="lineno">  456</span> </div>
<div class="line"><span class="lineno">  457</span>        <span class="keywordflow">if</span> (profile_length == 0) {</div>
<div class="line"><span class="lineno">  458</span>            <a class="code hl_define" href="../../dd/de2/a00320.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(<span class="stringliteral">&quot;Empty ICC profile found.&quot;</span>);</div>
<div class="line"><span class="lineno">  459</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  460</span>        }</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>        *nLen = profile_length;</div>
<div class="line"><span class="lineno">  463</span>        *pProfMem = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)malloc(profile_length);</div>
<div class="line"><span class="lineno">  464</span>        <span class="keywordflow">if</span> (!(*pProfMem)) {</div>
<div class="line"><span class="lineno">  465</span>            <a class="code hl_define" href="../../dd/de2/a00320.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(<span class="stringliteral">&quot;Memory allocation for ICC profile failed.&quot;</span>);</div>
<div class="line"><span class="lineno">  466</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  467</span>        }</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>        memcpy(*pProfMem, profile_data_raw, profile_length);</div>
<div class="line"><span class="lineno">  470</span>        printf(<span class="stringliteral">&quot;[INFO] ICC Profile extracted: %u bytes\n&quot;</span>, profile_length);</div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  473</span>    }</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  476</span>}</div>
<div class="ttc" id="aa00320_html_a7ebf4c3b4fb05d6f9094089ded75cbdd"><div class="ttname"><a href="../../dd/de2/a00320.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR(msg)</div><div class="ttdef"><b>Definition</b> iccPngDump.cpp:113</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../#l00185">main()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/de2/a00320_a68c8896e912c6f58bb27f84607813a2c_icgraph.png" border="0" usemap="#add/de2/a00320_a68c8896e912c6f58bb27f84607813a2c_icgraph" alt=""/></div>
<map name="add/de2/a00320_a68c8896e912c6f58bb27f84607813a2c_icgraph" id="add/de2/a00320_a68c8896e912c6f58bb27f84607813a2c_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,235,31"/>
<area shape="rect" href="../../dd/de2/a00320.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="95,21,60,21,60,15,95,15"/>
</map>
</div>

</div>
</div>
<a id="a7aafc2a7aabb3eed6cc2d556ff91654d" name="a7aafc2a7aabb3eed6cc2d556ff91654d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7aafc2a7aabb3eed6cc2d556ff91654d">&#9670;&#160;</a></span>InjectIccProfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool InjectIccProfile </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>inputPng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>iccFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outputPng</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Injects a new ICC profile into a PNG and writes it to disk.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inputPng</td><td>Source PNG path. </td></tr>
    <tr><td class="paramname">iccFile</td><td>ICC profile file to inject. </td></tr>
    <tr><td class="paramname">outputPng</td><td>Destination PNG path. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false otherwise.</dd></dl>
<p>Injects a new ICC profile into a PNG image and writes the output.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inputPng</td><td>Path to the source PNG file. </td></tr>
    <tr><td class="paramname">iccFile</td><td>Path to the ICC file to embed. </td></tr>
    <tr><td class="paramname">outputPng</td><td>Path to write the modified PNG file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on failure. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  336</span>                                                  {</div>
<div class="line"><span class="lineno">  337</span>    std::ifstream iccIn(iccFile, std::ios::binary);</div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordflow">if</span> (!iccIn.is_open()) {</div>
<div class="line"><span class="lineno">  339</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;Failed to open ICC profile file for reading.&quot;</span>);</div>
<div class="line"><span class="lineno">  340</span>    }</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>    std::vector&lt;unsigned char&gt; iccData((std::istreambuf_iterator&lt;char&gt;(iccIn)),</div>
<div class="line"><span class="lineno">  343</span>                                       std::istreambuf_iterator&lt;char&gt;());</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>    FILE* fpIn = fopen(inputPng.c_str(), <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><span class="lineno">  346</span>    <span class="keywordflow">if</span> (!fpIn) {</div>
<div class="line"><span class="lineno">  347</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;Failed to open input PNG file.&quot;</span>);</div>
<div class="line"><span class="lineno">  348</span>    }</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>    FILE* fpOut = fopen(outputPng.c_str(), <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><span class="lineno">  351</span>    <span class="keywordflow">if</span> (!fpOut) {</div>
<div class="line"><span class="lineno">  352</span>        fclose(fpIn);</div>
<div class="line"><span class="lineno">  353</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;Failed to open output PNG file.&quot;</span>);</div>
<div class="line"><span class="lineno">  354</span>    }</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>    png_structp png_ptr = png_create_read_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);</div>
<div class="line"><span class="lineno">  357</span>    <span class="keywordflow">if</span> (!png_ptr) {</div>
<div class="line"><span class="lineno">  358</span>        fclose(fpIn); fclose(fpOut);</div>
<div class="line"><span class="lineno">  359</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;Failed to create PNG read struct.&quot;</span>);</div>
<div class="line"><span class="lineno">  360</span>    }</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>    png_infop info_ptr = png_create_info_struct(png_ptr);</div>
<div class="line"><span class="lineno">  363</span>    <span class="keywordflow">if</span> (!info_ptr) {</div>
<div class="line"><span class="lineno">  364</span>        png_destroy_read_struct(&amp;png_ptr, NULL, NULL);</div>
<div class="line"><span class="lineno">  365</span>        fclose(fpIn); fclose(fpOut);</div>
<div class="line"><span class="lineno">  366</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;Failed to create PNG info struct.&quot;</span>);</div>
<div class="line"><span class="lineno">  367</span>    }</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>    <span class="keywordflow">if</span> (setjmp(png_jmpbuf(png_ptr))) {</div>
<div class="line"><span class="lineno">  370</span>        png_destroy_read_struct(&amp;png_ptr, &amp;info_ptr, NULL);</div>
<div class="line"><span class="lineno">  371</span>        fclose(fpIn); fclose(fpOut);</div>
<div class="line"><span class="lineno">  372</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;LibPNG read error.&quot;</span>);</div>
<div class="line"><span class="lineno">  373</span>    }</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>    png_init_io(png_ptr, fpIn);</div>
<div class="line"><span class="lineno">  376</span>    png_read_info(png_ptr, info_ptr);</div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>    png_structp write_ptr = png_create_write_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);</div>
<div class="line"><span class="lineno">  379</span>    png_infop write_info_ptr = png_create_info_struct(write_ptr);</div>
<div class="line"><span class="lineno">  380</span>    <span class="keywordflow">if</span> (!write_ptr || !write_info_ptr) {</div>
<div class="line"><span class="lineno">  381</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;Failed to create PNG write structures.&quot;</span>);</div>
<div class="line"><span class="lineno">  382</span>    }</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>    <span class="keywordflow">if</span> (setjmp(png_jmpbuf(write_ptr))) {</div>
<div class="line"><span class="lineno">  385</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;LibPNG write error.&quot;</span>);</div>
<div class="line"><span class="lineno">  386</span>    }</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>    png_init_io(write_ptr, fpOut);</div>
<div class="line"><span class="lineno">  389</span>   png_set_compression_level(write_ptr, Z_BEST_COMPRESSION);</div>
<div class="line"><span class="lineno">  390</span> </div>
<div class="line"><span class="lineno">  391</span><span class="comment">// MUST propagate original info to write_info_ptr before setting ICC</span></div>
<div class="line"><span class="lineno">  392</span>png_set_rows(write_ptr, write_info_ptr, <span class="keyword">nullptr</span>);  <span class="comment">// optional</span></div>
<div class="line"><span class="lineno">  393</span>png_set_IHDR(write_ptr, write_info_ptr,</div>
<div class="line"><span class="lineno">  394</span>             png_get_image_width(png_ptr, info_ptr),</div>
<div class="line"><span class="lineno">  395</span>             png_get_image_height(png_ptr, info_ptr),</div>
<div class="line"><span class="lineno">  396</span>             png_get_bit_depth(png_ptr, info_ptr),</div>
<div class="line"><span class="lineno">  397</span>             png_get_color_type(png_ptr, info_ptr),</div>
<div class="line"><span class="lineno">  398</span>             png_get_interlace_type(png_ptr, info_ptr),</div>
<div class="line"><span class="lineno">  399</span>             png_get_compression_type(png_ptr, info_ptr),</div>
<div class="line"><span class="lineno">  400</span>             png_get_filter_type(png_ptr, info_ptr));</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span><span class="comment">// only now is it safe to attach ICC</span></div>
<div class="line"><span class="lineno">  403</span>png_set_iCCP(write_ptr, write_info_ptr, <span class="stringliteral">&quot;icc&quot;</span>, 0, iccData.data(), iccData.size());</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span><span class="comment">// finally write header</span></div>
<div class="line"><span class="lineno">  406</span>png_write_info(write_ptr, write_info_ptr);</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span>    <span class="comment">// Re-read the input image data and write to output</span></div>
<div class="line"><span class="lineno">  410</span>    png_bytepp row_pointers = (png_bytepp)png_malloc(png_ptr,</div>
<div class="line"><span class="lineno">  411</span>        <span class="keyword">sizeof</span>(png_bytep) * png_get_image_height(png_ptr, info_ptr));</div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>    <span class="keywordflow">for</span> (png_uint_32 y = 0; y &lt; png_get_image_height(png_ptr, info_ptr); y++) {</div>
<div class="line"><span class="lineno">  414</span>        row_pointers[y] = (png_bytep)png_malloc(png_ptr, png_get_rowbytes(png_ptr, info_ptr));</div>
<div class="line"><span class="lineno">  415</span>    }</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>    png_read_image(png_ptr, row_pointers);</div>
<div class="line"><span class="lineno">  418</span>    png_write_image(write_ptr, row_pointers);</div>
<div class="line"><span class="lineno">  419</span>    png_write_end(write_ptr, NULL);</div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>    <span class="comment">// Cleanup</span></div>
<div class="line"><span class="lineno">  422</span>    <span class="keywordflow">for</span> (png_uint_32 y = 0; y &lt; png_get_image_height(png_ptr, info_ptr); y++) {</div>
<div class="line"><span class="lineno">  423</span>        png_free(png_ptr, row_pointers[y]);</div>
<div class="line"><span class="lineno">  424</span>    }</div>
<div class="line"><span class="lineno">  425</span>    png_free(png_ptr, row_pointers);</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>    png_destroy_read_struct(&amp;png_ptr, &amp;info_ptr, NULL);</div>
<div class="line"><span class="lineno">  428</span>    png_destroy_write_struct(&amp;write_ptr, &amp;write_info_ptr);</div>
<div class="line"><span class="lineno">  429</span>    fclose(fpIn);</div>
<div class="line"><span class="lineno">  430</span>    fclose(fpOut);</div>
<div class="line"><span class="lineno">  431</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  432</span>}</div>
<div class="ttc" id="aa00362_html_af5b4a7597bfac817b206f330836129c7"><div class="ttname"><a href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a></div><div class="ttdeci">#define safe_exit(reason)</div><div class="ttdef"><b>Definition</b> iccJpegDump.cpp:126</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00297">safe_exit()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00185">main()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/de2/a00320_a7aafc2a7aabb3eed6cc2d556ff91654d_cgraph.png" border="0" usemap="#add/de2/a00320_a7aafc2a7aabb3eed6cc2d556ff91654d_cgraph" alt=""/></div>
<map name="add/de2/a00320_a7aafc2a7aabb3eed6cc2d556ff91654d_cgraph" id="add/de2/a00320_a7aafc2a7aabb3eed6cc2d556ff91654d_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,123,31"/>
<area shape="rect" href="../../dd/de2/a00320.html#ae802948b6c816e4983b52a4018e79f43" title=" " alt="" coords="171,5,253,31"/>
<area shape="poly" title=" " alt="" coords="123,15,157,15,157,21,123,21"/>
</map>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/de2/a00320_a7aafc2a7aabb3eed6cc2d556ff91654d_icgraph.png" border="0" usemap="#add/de2/a00320_a7aafc2a7aabb3eed6cc2d556ff91654d_icgraph" alt=""/></div>
<map name="add/de2/a00320_a7aafc2a7aabb3eed6cc2d556ff91654d_icgraph" id="add/de2/a00320_a7aafc2a7aabb3eed6cc2d556ff91654d_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,225,31"/>
<area shape="rect" href="../../dd/de2/a00320.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97" name="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Entry point of the iccPngDump program.</p>
<p>This function handles command-line arguments, opens a PNG file, validates its format, and either extracts or injects an ICC profile.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Argument count. </td></tr>
    <tr><td class="paramname">argv</td><td>Argument vector. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  185</span>                                 {</div>
<div class="line"><span class="lineno">  186</span>    printf(<span class="stringliteral">&quot;[INFO] Starting iccPngDump...\n&quot;</span>);</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    <span class="keywordflow">if</span> (argc &lt; 2) {</div>
<div class="line"><span class="lineno">  189</span>        <a class="code hl_function" href="../../dd/de2/a00320.html#a5ae07f63d6b390e42068d941038dadf2">Usage</a>();</div>
<div class="line"><span class="lineno">  190</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;Missing input file argument.&quot;</span>);</div>
<div class="line"><span class="lineno">  191</span>    }</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *inputFile = NULL;</div>
<div class="line"><span class="lineno">  194</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *outputIccFile = NULL;</div>
<div class="line"><span class="lineno">  195</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *injectIccFile = NULL;</div>
<div class="line"><span class="lineno">  196</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *outputPngFile = NULL;</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    <span class="comment">// Simple CLI arg parsing</span></div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; argc; ++i) {</div>
<div class="line"><span class="lineno">  200</span>        <span class="keywordflow">if</span> (strcmp(argv[i], <span class="stringliteral">&quot;--write-icc&quot;</span>) == 0 &amp;&amp; i + 1 &lt; argc) {</div>
<div class="line"><span class="lineno">  201</span>            injectIccFile = argv[++i];</div>
<div class="line"><span class="lineno">  202</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(argv[i], <span class="stringliteral">&quot;--output&quot;</span>) == 0 &amp;&amp; i + 1 &lt; argc) {</div>
<div class="line"><span class="lineno">  203</span>            outputPngFile = argv[++i];</div>
<div class="line"><span class="lineno">  204</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!inputFile) {</div>
<div class="line"><span class="lineno">  205</span>            inputFile = argv[i];</div>
<div class="line"><span class="lineno">  206</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!outputIccFile) {</div>
<div class="line"><span class="lineno">  207</span>            outputIccFile = argv[i];</div>
<div class="line"><span class="lineno">  208</span>        }</div>
<div class="line"><span class="lineno">  209</span>    }</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordflow">if</span> (!inputFile) {</div>
<div class="line"><span class="lineno">  212</span>        <a class="code hl_function" href="../../dd/de2/a00320.html#a5ae07f63d6b390e42068d941038dadf2">Usage</a>();</div>
<div class="line"><span class="lineno">  213</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;Input PNG file not specified.&quot;</span>);</div>
<div class="line"><span class="lineno">  214</span>    }</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span><span class="comment">// --- Injection Mode ---</span></div>
<div class="line"><span class="lineno">  217</span><span class="keywordflow">if</span> (injectIccFile) {</div>
<div class="line"><span class="lineno">  218</span>    <span class="keywordflow">if</span> (!outputPngFile) {</div>
<div class="line"><span class="lineno">  219</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;Missing --output argument for write mode.&quot;</span>);</div>
<div class="line"><span class="lineno">  220</span>    }</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>    printf(<span class="stringliteral">&quot;[INFO] Injecting ICC profile &#39;%s&#39; into PNG: &#39;%s&#39;\n&quot;</span>, injectIccFile, outputPngFile);</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../dd/de2/a00320.html#a7aafc2a7aabb3eed6cc2d556ff91654d">InjectIccProfile</a>(inputFile, injectIccFile, outputPngFile)) {</div>
<div class="line"><span class="lineno">  225</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;Failed to inject ICC profile.&quot;</span>);</div>
<div class="line"><span class="lineno">  226</span>    }</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>    printf(<span class="stringliteral">&quot;[INFO] Injection successful.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  229</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  230</span>}</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>    <span class="comment">// --- Extraction Mode ---</span></div>
<div class="line"><span class="lineno">  233</span>    printf(<span class="stringliteral">&quot;[INFO] Opening PNG file: %s\n&quot;</span>, inputFile);</div>
<div class="line"><span class="lineno">  234</span>    FILE *fp = fopen(inputFile, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><span class="lineno">  235</span>    <span class="keywordflow">if</span> (!fp) {</div>
<div class="line"><span class="lineno">  236</span>        <a class="code hl_define" href="../../dd/de2/a00320.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(<span class="stringliteral">&quot;File cannot be opened.&quot;</span>);</div>
<div class="line"><span class="lineno">  237</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;File error.&quot;</span>);</div>
<div class="line"><span class="lineno">  238</span>    }</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> header[8];</div>
<div class="line"><span class="lineno">  241</span>    <span class="keywordflow">if</span> (fread(header, 1, 8, fp) != 8 || png_sig_cmp(header, 0, 8)) {</div>
<div class="line"><span class="lineno">  242</span>        <a class="code hl_define" href="../../dd/de2/a00320.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(<span class="stringliteral">&quot;Not a valid PNG file.&quot;</span>);</div>
<div class="line"><span class="lineno">  243</span>        fclose(fp);</div>
<div class="line"><span class="lineno">  244</span>        <a class="code hl_define" href="../../de/dd7/a00362.html#af5b4a7597bfac817b206f330836129c7">safe_exit</a>(<span class="stringliteral">&quot;Invalid PNG format.&quot;</span>);</div>
<div class="line"><span class="lineno">  245</span>    }</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>    png_structp png_ptr = png_create_read_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);</div>
<div class="line"><span class="lineno">  248</span>    <span class="keywordflow">if</span> (!png_ptr) {</div>
<div class="line"><span class="lineno">  249</span>        fclose(fp);</div>
<div class="line"><span class="lineno">  250</span>        <a class="code hl_define" href="../../dd/de2/a00320.html#a6ce959f9b21d0b315a7426c935664fd2">BAIL_OUT</a>(<span class="stringliteral">&quot;Failed to create PNG read structure.&quot;</span>);</div>
<div class="line"><span class="lineno">  251</span>    }</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>    png_infop info_ptr = png_create_info_struct(png_ptr);</div>
<div class="line"><span class="lineno">  254</span>    <span class="keywordflow">if</span> (!info_ptr) {</div>
<div class="line"><span class="lineno">  255</span>        png_destroy_read_struct(&amp;png_ptr, NULL, NULL);</div>
<div class="line"><span class="lineno">  256</span>        fclose(fp);</div>
<div class="line"><span class="lineno">  257</span>        <a class="code hl_define" href="../../dd/de2/a00320.html#a6ce959f9b21d0b315a7426c935664fd2">BAIL_OUT</a>(<span class="stringliteral">&quot;Failed to create PNG info structure.&quot;</span>);</div>
<div class="line"><span class="lineno">  258</span>    }</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>    <span class="keywordflow">if</span> (setjmp(png_jmpbuf(png_ptr))) {</div>
<div class="line"><span class="lineno">  261</span>        png_destroy_read_struct(&amp;png_ptr, &amp;info_ptr, NULL);</div>
<div class="line"><span class="lineno">  262</span>        fclose(fp);</div>
<div class="line"><span class="lineno">  263</span>        <a class="code hl_define" href="../../dd/de2/a00320.html#a6ce959f9b21d0b315a7426c935664fd2">BAIL_OUT</a>(<span class="stringliteral">&quot;LibPNG error encountered.&quot;</span>);</div>
<div class="line"><span class="lineno">  264</span>    }</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    png_init_io(png_ptr, fp);</div>
<div class="line"><span class="lineno">  267</span>    png_set_sig_bytes(png_ptr, 8);</div>
<div class="line"><span class="lineno">  268</span>    png_read_info(png_ptr, info_ptr);</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>    <a class="code hl_function" href="../../dd/de2/a00320.html#a74d0f5b1eb5a544bca55f8741475a463">PrintPngInfo</a>(png_ptr, info_ptr);</div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pProfMem = NULL;</div>
<div class="line"><span class="lineno">  273</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nLen = 0;</div>
<div class="line"><span class="lineno">  274</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dd/de2/a00320.html#a68c8896e912c6f58bb27f84607813a2c">ExtractIccProfile</a>(png_ptr, info_ptr, &amp;pProfMem, &amp;nLen)) {</div>
<div class="line"><span class="lineno">  275</span>        <a class="code hl_function" href="../../dd/de2/a00320.html#a7431d1954b02d2a2d01ad5c9c66a7fba">PrintIccProfileInfo</a>(pProfMem, nLen, outputIccFile);</div>
<div class="line"><span class="lineno">  276</span>        free(pProfMem);</div>
<div class="line"><span class="lineno">  277</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  278</span>        printf(<span class="stringliteral">&quot;[INFO] No embedded ICC Profile found.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  279</span>    }</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>    png_destroy_read_struct(&amp;png_ptr, &amp;info_ptr, NULL);</div>
<div class="line"><span class="lineno">  282</span>    fclose(fp);</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>    printf(<span class="stringliteral">&quot;[INFO] iccPngDump completed successfully.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  285</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  286</span>}</div>
<div class="ttc" id="aa00320_html_a5ae07f63d6b390e42068d941038dadf2"><div class="ttname"><a href="../../dd/de2/a00320.html#a5ae07f63d6b390e42068d941038dadf2">Usage</a></div><div class="ttdeci">void Usage()</div><div class="ttdef"><b>Definition</b> iccPngDump.cpp:311</div></div>
<div class="ttc" id="aa00320_html_a68c8896e912c6f58bb27f84607813a2c"><div class="ttname"><a href="../../dd/de2/a00320.html#a68c8896e912c6f58bb27f84607813a2c">ExtractIccProfile</a></div><div class="ttdeci">int ExtractIccProfile(png_structp png_ptr, png_infop info_ptr, unsigned char **pProfMem, unsigned int *nLen)</div><div class="ttdef"><b>Definition</b> iccPngDump.cpp:448</div></div>
<div class="ttc" id="aa00320_html_a6ce959f9b21d0b315a7426c935664fd2"><div class="ttname"><a href="../../dd/de2/a00320.html#a6ce959f9b21d0b315a7426c935664fd2">BAIL_OUT</a></div><div class="ttdeci">#define BAIL_OUT(msg)</div><div class="ttdef"><b>Definition</b> iccPngDump.cpp:114</div></div>
<div class="ttc" id="aa00320_html_a7431d1954b02d2a2d01ad5c9c66a7fba"><div class="ttname"><a href="../../dd/de2/a00320.html#a7431d1954b02d2a2d01ad5c9c66a7fba">PrintIccProfileInfo</a></div><div class="ttdeci">void PrintIccProfileInfo(const unsigned char *pProfMem, unsigned int nLen, const char *outputFile)</div><div class="ttdef"><b>Definition</b> iccPngDump.cpp:553</div></div>
<div class="ttc" id="aa00320_html_a74d0f5b1eb5a544bca55f8741475a463"><div class="ttname"><a href="../../dd/de2/a00320.html#a74d0f5b1eb5a544bca55f8741475a463">PrintPngInfo</a></div><div class="ttdeci">void PrintPngInfo(png_structp png_ptr, png_infop info_ptr)</div><div class="ttdef"><b>Definition</b> iccPngDump.cpp:489</div></div>
<div class="ttc" id="aa00320_html_a7aafc2a7aabb3eed6cc2d556ff91654d"><div class="ttname"><a href="../../dd/de2/a00320.html#a7aafc2a7aabb3eed6cc2d556ff91654d">InjectIccProfile</a></div><div class="ttdeci">bool InjectIccProfile(const std::string &amp;inputPng, const std::string &amp;iccFile, const std::string &amp;outputPng)</div><div class="ttdef"><b>Definition</b> iccPngDump.cpp:334</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00448">ExtractIccProfile()</a>, <a class="el" href="../../#l00334">InjectIccProfile()</a>, <a class="el" href="../../#l00553">PrintIccProfileInfo()</a>, <a class="el" href="../../#l00489">PrintPngInfo()</a>, <a class="el" href="../../#l00297">safe_exit()</a>, and <a class="el" href="../../#l00185">Usage()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/de2/a00320_a0ddf1224851353fc92bfbff6f499fa97_cgraph.png" border="0" usemap="#add/de2/a00320_a0ddf1224851353fc92bfbff6f499fa97_cgraph" alt=""/></div>
<map name="add/de2/a00320_a0ddf1224851353fc92bfbff6f499fa97_cgraph" id="add/de2/a00320_a0ddf1224851353fc92bfbff6f499fa97_cgraph">
<area shape="rect" title=" " alt="" coords="5,131,60,156"/>
<area shape="rect" href="../../dd/de2/a00320.html#a68c8896e912c6f58bb27f84607813a2c" title=" " alt="" coords="113,5,239,31"/>
<area shape="poly" title=" " alt="" coords="38,129,64,86,83,61,106,40,114,35,117,39,110,44,87,65,68,89,42,132"/>
<area shape="rect" href="../../dd/de2/a00320.html#a7aafc2a7aabb3eed6cc2d556ff91654d" title=" " alt="" coords="117,55,235,80"/>
<area shape="poly" title=" " alt="" coords="53,128,107,97,133,84,135,88,109,102,56,133"/>
<area shape="rect" href="../../dd/de2/a00320.html#ae802948b6c816e4983b52a4018e79f43" title=" " alt="" coords="369,80,452,105"/>
<area shape="poly" title=" " alt="" coords="60,137,355,97,356,103,61,142"/>
<area shape="rect" href="../../dd/de2/a00320.html#a7431d1954b02d2a2d01ad5c9c66a7fba" title=" " alt="" coords="108,156,244,181"/>
<area shape="poly" title=" " alt="" coords="61,145,95,152,94,157,60,151"/>
<area shape="rect" href="../../dd/de2/a00320.html#a74d0f5b1eb5a544bca55f8741475a463" title=" " alt="" coords="125,205,227,231"/>
<area shape="poly" title=" " alt="" coords="52,154,109,192,123,198,121,203,107,196,49,159"/>
<area shape="rect" href="../../d3/d93/a00341.html#a5ae07f63d6b390e42068d941038dadf2" title=" " alt="" coords="145,255,207,280"/>
<area shape="poly" title=" " alt="" coords="43,155,68,197,87,221,110,241,133,254,130,258,106,246,83,224,64,200,38,158"/>
<area shape="poly" title=" " alt="" coords="235,71,356,84,355,89,234,76"/>
<area shape="rect" href="../../dc/d2f/a00425.html#aa0a8f4850e598e92b3c8b0e65843bb20" title=" " alt="" coords="292,143,529,168"/>
<area shape="poly" title=" " alt="" coords="244,162,278,160,278,166,245,167"/>
<area shape="rect" href="../../d0/dc2/a00104.html#a52a86e674c0a7574b7269ac75c2c0069" title=" " alt="" coords="353,192,468,217"/>
<area shape="poly" title=" " alt="" coords="245,176,340,191,339,196,244,182"/>
<area shape="rect" href="../../dc/d2f/a00425.html#a5dacd531cac49a9fbe6b059c4ac47e28" title=" " alt="" coords="577,93,783,119"/>
<area shape="poly" title=" " alt="" coords="480,140,596,119,597,124,481,145"/>
<area shape="rect" href="../../d5/db1/a00140.html#a58a42edd6e2e756a705923c8292d9062" title=" " alt="" coords="605,143,755,168"/>
<area shape="poly" title=" " alt="" coords="529,153,591,153,591,158,529,158"/>
<area shape="rect" href="../../d5/db1/a00140.html#aff402bf2929fc533de32a53ccdce868d" title=" " alt="" coords="863,93,939,119"/>
<area shape="poly" title=" " alt="" coords="783,103,849,103,849,109,783,109"/>
<area shape="rect" href="../../d5/db1/a00140.html#a350c29e4046a24ff35f3bad20f96e2ca" title=" " alt="" coords="855,143,946,168"/>
<area shape="poly" title=" " alt="" coords="756,153,841,153,841,158,756,158"/>
<area shape="rect" href="../../da/d5b/a00905.html#ae20403295a31727fe9f77ce46ea57c8e" title=" " alt="" coords="607,192,753,217"/>
<area shape="poly" title=" " alt="" coords="469,202,593,202,593,207,469,207"/>
<area shape="rect" href="../../da/d5b/a00905.html#a8c8e1e57d736a0074e6933c71d9925f1" title=" " alt="" coords="831,192,971,217"/>
<area shape="poly" title=" " alt="" coords="754,202,817,202,817,207,754,207"/>
</map>
</div>

</div>
</div>
<a id="a7431d1954b02d2a2d01ad5c9c66a7fba" name="a7431d1954b02d2a2d01ad5c9c66a7fba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7431d1954b02d2a2d01ad5c9c66a7fba">&#9670;&#160;</a></span>PrintIccProfileInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrintIccProfileInfo </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>pProfMem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>outputFile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Displays and optionally saves ICC profile information.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pProfMem</td><td>ICC profile memory block. </td></tr>
    <tr><td class="paramname">nLen</td><td>Size of ICC data. </td></tr>
    <tr><td class="paramname">outputFile</td><td>Path to write ICC (optional).</td></tr>
  </table>
  </dd>
</dl>
<p>Parses and displays ICC profile metadata, and optionally saves it to a file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pProfMem</td><td>Pointer to the ICC profile data. </td></tr>
    <tr><td class="paramname">nLen</td><td>Length of the ICC profile data in bytes. </td></tr>
    <tr><td class="paramname">outputFile</td><td>Path to the output file for saving the ICC profile (optional). </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  553</span>                                                                                                   {</div>
<div class="line"><span class="lineno">  554</span>    printf(<span class="stringliteral">&quot;--------------------&gt; ICC Profile Information &lt;---------------------------\n&quot;</span>);</div>
<div class="line"><span class="lineno">  555</span>    printf(<span class="stringliteral">&quot;Profile Size:      %u bytes\n&quot;</span>, nLen);</div>
<div class="line"><span class="lineno">  556</span> </div>
<div class="line"><span class="lineno">  557</span>    <span class="comment">// Attempt to parse the ICC profile</span></div>
<div class="line"><span class="lineno">  558</span>    <a class="code hl_variable" href="../../d4/d3a/a00101.html#a14e10b61df6e9ec7c90c5d3bc38c78d9">CIccProfile</a> *pProfile = <a class="code hl_function" href="../../d0/dc2/a00104.html#a97134bdd4b4bf5e8a43ef018bba0917e">OpenIccProfile</a>(pProfMem, nLen);</div>
<div class="line"><span class="lineno">  559</span>    <span class="keywordflow">if</span> (!pProfile) {</div>
<div class="line"><span class="lineno">  560</span>        <a class="code hl_define" href="../../dd/de2/a00320.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(<span class="stringliteral">&quot;Failed to parse ICC Profile.&quot;</span>);</div>
<div class="line"><span class="lineno">  561</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  562</span>    }</div>
<div class="line"><span class="lineno">  563</span> </div>
<div class="line"><span class="lineno">  564</span>    <span class="comment">// Extract ICC header details</span></div>
<div class="line"><span class="lineno">  565</span>    <a class="code hl_struct" href="../../d7/d46/a00002.html#d4/dd7/a00793">icHeader</a> *pHdr = &amp;pProfile-&gt;m_Header;</div>
<div class="line"><span class="lineno">  566</span>    <a class="code hl_class" href="../../dc/d2f/a00425.html">CIccInfo</a> Fmt;</div>
<div class="line"><span class="lineno">  567</span> </div>
<div class="line"><span class="lineno">  568</span>    printf(<span class="stringliteral">&quot; Color Space:      %s\n&quot;</span>, Fmt.<a class="code hl_function" href="../../dc/d2f/a00425.html#aa0a8f4850e598e92b3c8b0e65843bb20">GetColorSpaceSigName</a>(pHdr-&gt;<a class="code hl_variable" href="../../d7/d46/a00002.html#a14e131b497989c1876e397c5ff0c5ad6">colorSpace</a>));</div>
<div class="line"><span class="lineno">  569</span>    printf(<span class="stringliteral">&quot; Colorimetric PCS: %s\n&quot;</span>, Fmt.<a class="code hl_function" href="../../dc/d2f/a00425.html#aa0a8f4850e598e92b3c8b0e65843bb20">GetColorSpaceSigName</a>(pHdr-&gt;<a class="code hl_variable" href="../../d7/d46/a00002.html#afc7d91a6461857bba027696d4a8e5867">pcs</a>));</div>
<div class="line"><span class="lineno">  570</span>    printf(<span class="stringliteral">&quot; Profile Version:  %d.%d.%d\n&quot;</span>, </div>
<div class="line"><span class="lineno">  571</span>           (pHdr-&gt;<a class="code hl_variable" href="../../d7/d46/a00002.html#ab4a2c325ab3c203cc7a7d79be401425d">version</a> &gt;&gt; 24) &amp; 0xFF,   <span class="comment">// Major version</span></div>
<div class="line"><span class="lineno">  572</span>           (pHdr-&gt;<a class="code hl_variable" href="../../d7/d46/a00002.html#ab4a2c325ab3c203cc7a7d79be401425d">version</a> &gt;&gt; 20) &amp; 0x0F,   <span class="comment">// Minor version</span></div>
<div class="line"><span class="lineno">  573</span>           (pHdr-&gt;<a class="code hl_variable" href="../../d7/d46/a00002.html#ab4a2c325ab3c203cc7a7d79be401425d">version</a> &gt;&gt; 16) &amp; 0x0F);  <span class="comment">// Sub-minor version</span></div>
<div class="line"><span class="lineno">  574</span> </div>
<div class="line"><span class="lineno">  575</span>    <span class="keyword">delete</span> pProfile;</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>    <span class="comment">// If an output file is specified, save the ICC profile</span></div>
<div class="line"><span class="lineno">  578</span>    <span class="keywordflow">if</span> (outputFile) {</div>
<div class="line"><span class="lineno">  579</span>        FILE *outFile = fopen(outputFile, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><span class="lineno">  580</span>        <span class="keywordflow">if</span> (!outFile) {</div>
<div class="line"><span class="lineno">  581</span>            <a class="code hl_define" href="../../dd/de2/a00320.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(<span class="stringliteral">&quot;Unable to open output file for writing.&quot;</span>);</div>
<div class="line"><span class="lineno">  582</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  583</span>        }</div>
<div class="line"><span class="lineno">  584</span>        fwrite(pProfMem, 1, nLen, outFile);</div>
<div class="line"><span class="lineno">  585</span>        fclose(outFile);</div>
<div class="line"><span class="lineno">  586</span>        printf(<span class="stringliteral">&quot;[INFO] ICC Profile saved to: %s\n&quot;</span>, outputFile);</div>
<div class="line"><span class="lineno">  587</span>    }</div>
<div class="line"><span class="lineno">  588</span>    </div>
<div class="line"><span class="lineno">  589</span>    printf(<span class="stringliteral">&quot;--------------------------------------------------------------------\n&quot;</span>);</div>
<div class="line"><span class="lineno">  590</span>}</div>
<div class="ttc" id="aa00002_html_a14e131b497989c1876e397c5ff0c5ad6"><div class="ttname"><a href="../../d7/d46/a00002.html#a14e131b497989c1876e397c5ff0c5ad6">icHeader::colorSpace</a></div><div class="ttdeci">icColorSpaceSignature colorSpace</div><div class="ttdef"><b>Definition</b> icProfileHeader.h:2048</div></div>
<div class="ttc" id="aa00002_html_ab4a2c325ab3c203cc7a7d79be401425d"><div class="ttname"><a href="../../d7/d46/a00002.html#ab4a2c325ab3c203cc7a7d79be401425d">icHeader::version</a></div><div class="ttdeci">icUInt32Number version</div><div class="ttdef"><b>Definition</b> icProfileHeader.h:2046</div></div>
<div class="ttc" id="aa00002_html_afc7d91a6461857bba027696d4a8e5867"><div class="ttname"><a href="../../d7/d46/a00002.html#afc7d91a6461857bba027696d4a8e5867">icHeader::pcs</a></div><div class="ttdeci">icColorSpaceSignature pcs</div><div class="ttdef"><b>Definition</b> icProfileHeader.h:2049</div></div>
<div class="ttc" id="aa00002_html_d4/dd7/a00793"><div class="ttname"><a href="../../d7/d46/a00002.html#d4/dd7/a00793">icHeader</a></div><div class="ttdef"><b>Definition</b> icProfileHeader.h:2043</div></div>
<div class="ttc" id="aa00101_html_a14e10b61df6e9ec7c90c5d3bc38c78d9"><div class="ttname"><a href="../../d4/d3a/a00101.html#a14e10b61df6e9ec7c90c5d3bc38c78d9">CIccProfile</a></div><div class="ttdeci">class ICCPROFLIB_API CIccProfile</div><div class="ttdef"><b>Definition</b> IccPcc.h:80</div></div>
<div class="ttc" id="aa00104_html_a97134bdd4b4bf5e8a43ef018bba0917e"><div class="ttname"><a href="../../d0/dc2/a00104.html#a97134bdd4b4bf5e8a43ef018bba0917e">OpenIccProfile</a></div><div class="ttdeci">CIccProfile * OpenIccProfile(const icChar *szFilename, bool bUseSubProfile)</div><div class="ttdef"><b>Definition</b> IccProfile.cpp:3397</div></div>
<div class="ttc" id="aa00425_html"><div class="ttname"><a href="../../dc/d2f/a00425.html">CIccInfo</a></div><div class="ttdef"><b>Definition</b> IccUtil.h:303</div></div>
<div class="ttc" id="aa00425_html_aa0a8f4850e598e92b3c8b0e65843bb20"><div class="ttname"><a href="../../dc/d2f/a00425.html#aa0a8f4850e598e92b3c8b0e65843bb20">CIccInfo::GetColorSpaceSigName</a></div><div class="ttdeci">const icChar * GetColorSpaceSigName(icColorSpaceSignature sig)</div><div class="ttdef"><b>Definition</b> IccUtil.cpp:1640</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00080">CIccProfile</a>, <a class="el" href="../../#l02048">icHeader::colorSpace</a>, <a class="el" href="../../#l01640">CIccInfo::GetColorSpaceSigName()</a>, <a class="el" href="../../#l03472">OpenIccProfile()</a>, <a class="el" href="../../#l02049">icHeader::pcs</a>, and <a class="el" href="../../#l02046">icHeader::version</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00185">main()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/de2/a00320_a7431d1954b02d2a2d01ad5c9c66a7fba_cgraph.png" border="0" usemap="#add/de2/a00320_a7431d1954b02d2a2d01ad5c9c66a7fba_cgraph" alt=""/></div>
<map name="add/de2/a00320_a7431d1954b02d2a2d01ad5c9c66a7fba_cgraph" id="add/de2/a00320_a7431d1954b02d2a2d01ad5c9c66a7fba_cgraph">
<area shape="rect" title=" " alt="" coords="5,80,141,105"/>
<area shape="rect" href="../../dc/d2f/a00425.html#aa0a8f4850e598e92b3c8b0e65843bb20" title=" " alt="" coords="189,55,427,80"/>
<area shape="poly" title=" " alt="" coords="141,83,176,79,177,84,142,88"/>
<area shape="rect" href="../../d0/dc2/a00104.html#a52a86e674c0a7574b7269ac75c2c0069" title=" " alt="" coords="251,104,365,129"/>
<area shape="poly" title=" " alt="" coords="142,97,237,107,237,112,141,102"/>
<area shape="rect" href="../../dc/d2f/a00425.html#a5dacd531cac49a9fbe6b059c4ac47e28" title=" " alt="" coords="475,5,680,31"/>
<area shape="poly" title=" " alt="" coords="378,52,493,31,494,36,378,57"/>
<area shape="rect" href="../../d5/db1/a00140.html#a58a42edd6e2e756a705923c8292d9062" title=" " alt="" coords="502,55,653,80"/>
<area shape="poly" title=" " alt="" coords="427,65,489,65,489,70,427,70"/>
<area shape="rect" href="../../d5/db1/a00140.html#aff402bf2929fc533de32a53ccdce868d" title=" " alt="" coords="760,5,836,31"/>
<area shape="poly" title=" " alt="" coords="680,15,746,15,746,21,680,21"/>
<area shape="rect" href="../../d5/db1/a00140.html#a350c29e4046a24ff35f3bad20f96e2ca" title=" " alt="" coords="753,55,843,80"/>
<area shape="poly" title=" " alt="" coords="653,65,739,65,739,70,653,70"/>
<area shape="rect" href="../../da/d5b/a00905.html#ae20403295a31727fe9f77ce46ea57c8e" title=" " alt="" coords="504,104,651,129"/>
<area shape="poly" title=" " alt="" coords="366,114,490,114,490,119,366,119"/>
<area shape="rect" href="../../da/d5b/a00905.html#a8c8e1e57d736a0074e6933c71d9925f1" title=" " alt="" coords="728,104,868,129"/>
<area shape="poly" title=" " alt="" coords="651,114,714,114,714,119,651,119"/>
</map>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/de2/a00320_a7431d1954b02d2a2d01ad5c9c66a7fba_icgraph.png" border="0" usemap="#add/de2/a00320_a7431d1954b02d2a2d01ad5c9c66a7fba_icgraph" alt=""/></div>
<map name="add/de2/a00320_a7431d1954b02d2a2d01ad5c9c66a7fba_icgraph" id="add/de2/a00320_a7431d1954b02d2a2d01ad5c9c66a7fba_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,244,31"/>
<area shape="rect" href="../../dd/de2/a00320.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="a74d0f5b1eb5a544bca55f8741475a463" name="a74d0f5b1eb5a544bca55f8741475a463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74d0f5b1eb5a544bca55f8741475a463">&#9670;&#160;</a></span>PrintPngInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrintPngInfo </td>
          <td>(</td>
          <td class="paramtype">png_structp&#160;</td>
          <td class="paramname"><em>png_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">png_infop&#160;</td>
          <td class="paramname"><em>info_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prints information about a given PNG file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">png_ptr</td><td>Pointer to the PNG structure. </td></tr>
    <tr><td class="paramname">info_ptr</td><td>Pointer to the PNG info structure.</td></tr>
  </table>
  </dd>
</dl>
<p>Displays detailed metadata information about a PNG image.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">png_ptr</td><td>Pointer to the PNG read structure. </td></tr>
    <tr><td class="paramname">info_ptr</td><td>Pointer to the PNG info structure. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  489</span>                                                           {</div>
<div class="line"><span class="lineno">  490</span>    <span class="comment">// Retrieve PNG metadata</span></div>
<div class="line"><span class="lineno">  491</span>    <span class="keywordtype">int</span> width = png_get_image_width(png_ptr, info_ptr);</div>
<div class="line"><span class="lineno">  492</span>    <span class="keywordtype">int</span> height = png_get_image_height(png_ptr, info_ptr);</div>
<div class="line"><span class="lineno">  493</span>    <span class="keywordtype">int</span> bit_depth = png_get_bit_depth(png_ptr, info_ptr);</div>
<div class="line"><span class="lineno">  494</span>    <span class="keywordtype">int</span> color_type = png_get_color_type(png_ptr, info_ptr);</div>
<div class="line"><span class="lineno">  495</span>    <span class="keywordtype">int</span> interlace_type = png_get_interlace_type(png_ptr, info_ptr);</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>    printf(<span class="stringliteral">&quot;--------------------&gt; PNG Image Metadata &lt;---------------------------\n&quot;</span>);</div>
<div class="line"><span class="lineno">  498</span>    printf(<span class="stringliteral">&quot;Size:              (%d x %d) pixels\n&quot;</span>, width, height);</div>
<div class="line"><span class="lineno">  499</span>    printf(<span class="stringliteral">&quot;Bit Depth:         %d\n&quot;</span>, bit_depth);</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>    <span class="comment">// Decode color type</span></div>
<div class="line"><span class="lineno">  502</span>    printf(<span class="stringliteral">&quot;Color Type:        &quot;</span>);</div>
<div class="line"><span class="lineno">  503</span>    <span class="keywordflow">switch</span> (color_type) {</div>
<div class="line"><span class="lineno">  504</span>        <span class="keywordflow">case</span> PNG_COLOR_TYPE_GRAY:</div>
<div class="line"><span class="lineno">  505</span>            printf(<span class="stringliteral">&quot;Grayscale\n&quot;</span>);</div>
<div class="line"><span class="lineno">  506</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  507</span>        <span class="keywordflow">case</span> PNG_COLOR_TYPE_RGB:</div>
<div class="line"><span class="lineno">  508</span>            printf(<span class="stringliteral">&quot;RGB (Truecolor)\n&quot;</span>);</div>
<div class="line"><span class="lineno">  509</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  510</span>        <span class="keywordflow">case</span> PNG_COLOR_TYPE_PALETTE:</div>
<div class="line"><span class="lineno">  511</span>            printf(<span class="stringliteral">&quot;Indexed Color (Palette)\n&quot;</span>);</div>
<div class="line"><span class="lineno">  512</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  513</span>        <span class="keywordflow">case</span> PNG_COLOR_TYPE_GRAY_ALPHA:</div>
<div class="line"><span class="lineno">  514</span>            printf(<span class="stringliteral">&quot;Grayscale with Alpha\n&quot;</span>);</div>
<div class="line"><span class="lineno">  515</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  516</span>        <span class="keywordflow">case</span> PNG_COLOR_TYPE_RGB_ALPHA:</div>
<div class="line"><span class="lineno">  517</span>            printf(<span class="stringliteral">&quot;RGBA (Truecolor with Alpha)\n&quot;</span>);</div>
<div class="line"><span class="lineno">  518</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  519</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  520</span>            printf(<span class="stringliteral">&quot;Unknown (%d)\n&quot;</span>, color_type);</div>
<div class="line"><span class="lineno">  521</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  522</span>    }</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>    <span class="comment">// Decode interlace type</span></div>
<div class="line"><span class="lineno">  525</span>    printf(<span class="stringliteral">&quot;Interlace Type:    &quot;</span>);</div>
<div class="line"><span class="lineno">  526</span>    <span class="keywordflow">switch</span> (interlace_type) {</div>
<div class="line"><span class="lineno">  527</span>        <span class="keywordflow">case</span> PNG_INTERLACE_NONE:</div>
<div class="line"><span class="lineno">  528</span>            printf(<span class="stringliteral">&quot;None\n&quot;</span>);</div>
<div class="line"><span class="lineno">  529</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  530</span>        <span class="keywordflow">case</span> PNG_INTERLACE_ADAM7:</div>
<div class="line"><span class="lineno">  531</span>            printf(<span class="stringliteral">&quot;Adam7 Interlacing\n&quot;</span>);</div>
<div class="line"><span class="lineno">  532</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  533</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  534</span>            printf(<span class="stringliteral">&quot;Unknown (%d)\n&quot;</span>, interlace_type);</div>
<div class="line"><span class="lineno">  535</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  536</span>    }</div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>    printf(<span class="stringliteral">&quot;--------------------------------------------------------------------\n&quot;</span>);</div>
<div class="line"><span class="lineno">  539</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../#l00185">main()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/de2/a00320_a74d0f5b1eb5a544bca55f8741475a463_icgraph.png" border="0" usemap="#add/de2/a00320_a74d0f5b1eb5a544bca55f8741475a463_icgraph" alt=""/></div>
<map name="add/de2/a00320_a74d0f5b1eb5a544bca55f8741475a463_icgraph" id="add/de2/a00320_a74d0f5b1eb5a544bca55f8741475a463_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,209,31"/>
<area shape="rect" href="../../dd/de2/a00320.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="ae802948b6c816e4983b52a4018e79f43" name="ae802948b6c816e4983b52a4018e79f43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae802948b6c816e4983b52a4018e79f43">&#9670;&#160;</a></span>safe_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void safe_exit </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>reason</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Safely exits the program with a given reason.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reason</td><td>The reason for exiting.</td></tr>
  </table>
  </dd>
</dl>
<p>Logs an error message and exits the program safely.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reason</td><td>A string containing the reason for exiting. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  297</span>                                   {</div>
<div class="line"><span class="lineno">  298</span>    <a class="code hl_define" href="../../dd/de2/a00320.html#a7ebf4c3b4fb05d6f9094089ded75cbdd">LOG_ERROR</a>(reason);</div>
<div class="line"><span class="lineno">  299</span>    exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  300</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../#l00334">InjectIccProfile()</a>, and <a class="el" href="../../#l00185">main()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/de2/a00320_ae802948b6c816e4983b52a4018e79f43_icgraph.png" border="0" usemap="#add/de2/a00320_ae802948b6c816e4983b52a4018e79f43_icgraph" alt=""/></div>
<map name="add/de2/a00320_ae802948b6c816e4983b52a4018e79f43_icgraph" id="add/de2/a00320_ae802948b6c816e4983b52a4018e79f43_icgraph">
<area shape="rect" title=" " alt="" coords="273,31,356,56"/>
<area shape="rect" href="../../dd/de2/a00320.html#a7aafc2a7aabb3eed6cc2d556ff91654d" title=" " alt="" coords="108,5,225,31"/>
<area shape="poly" title=" " alt="" coords="259,37,225,31,226,25,260,31"/>
<area shape="rect" href="../../dd/de2/a00320.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,31,60,56"/>
<area shape="poly" title=" " alt="" coords="260,46,60,46,60,41,260,41"/>
<area shape="poly" title=" " alt="" coords="95,34,61,41,60,36,94,29"/>
</map>
</div>

</div>
</div>
<a id="a5ae07f63d6b390e42068d941038dadf2" name="a5ae07f63d6b390e42068d941038dadf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ae07f63d6b390e42068d941038dadf2">&#9670;&#160;</a></span>Usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Usage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Displays usage information for the program.</p>
<p>Displays usage information for the iccPngDump tool.</p>
<p>This function provides details on the correct command-line syntax. </p>
<div class="fragment"><div class="line"><span class="lineno">  311</span>             {</div>
<div class="line"><span class="lineno">  312</span>    printf(<span class="stringliteral">&quot;Usage:\n&quot;</span>);</div>
<div class="line"><span class="lineno">  313</span>    printf(<span class="stringliteral">&quot;  iccPngDump &lt;input.png&gt; [output.icc]\n&quot;</span>);</div>
<div class="line"><span class="lineno">  314</span>    printf(<span class="stringliteral">&quot;    - Extracts ICC profile from PNG.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  315</span>    printf(<span class="stringliteral">&quot;    - Saves profile to [output.icc] if specified.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  316</span>    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="lineno">  317</span>    printf(<span class="stringliteral">&quot;  iccPngDump &lt;input.png&gt; --write-icc &lt;profile.icc&gt; --output &lt;output.png&gt;\n&quot;</span>);</div>
<div class="line"><span class="lineno">  318</span>    printf(<span class="stringliteral">&quot;    - Injects specified ICC profile into PNG.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  319</span>    printf(<span class="stringliteral">&quot;    - Outputs modified PNG as &lt;output.png&gt;.\n&quot;</span>);</div>
<div class="line"><span class="lineno">  320</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_7e461070e7b716e896e0d97cd6a82321.html">Tools</a></li><li class="navelem"><a class="el" href="../../dir_65711a695b8fcb9862cd48d0d41b1cc2.html">CmdLine</a></li><li class="navelem"><a class="el" href="../../dir_748dab21210808b0e3fd37a423cc359a.html">IccPngDump</a></li><li class="navelem"><a class="el" href="../../dd/de2/a00320.html">iccPngDump.cpp</a></li>
    <li class="footer">Generated on Wed Jul 30 2025 15:11:11 for iccDEV by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
