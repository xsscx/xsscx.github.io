<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iccDEV: IccProfLib/IccConvertUTF.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">iccDEV<span id="projectnumber">&#160;2.2.61</span>
   </div>
   <div id="projectbrief">iccDEV Tools</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d3/d00/a00113.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">IccConvertUTF.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../">IccProfLibConf.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for IccConvertUTF.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d8/d17/a00114.png" border="0" usemap="#aIccProfLib_2IccConvertUTF_8h" alt=""/></div>
<map name="aIccProfLib_2IccConvertUTF_8h" id="aIccProfLib_2IccConvertUTF_8h">
<area shape="rect" title=" " alt="" coords="5,5,200,31"/>
<area shape="rect" href="../../d5/d16/a00029.html" title=" " alt="" coords="39,79,166,104"/>
<area shape="poly" title=" " alt="" coords="105,31,105,65,100,65,100,31"/>
<area shape="rect" title=" " alt="" coords="67,152,138,177"/>
<area shape="poly" title=" " alt="" coords="105,104,105,138,100,138,100,104"/>
</map>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d2/da3/a00115.png" border="0" usemap="#aIccProfLib_2IccConvertUTF_8hdep" alt=""/></div>
<map name="aIccProfLib_2IccConvertUTF_8hdep" id="aIccProfLib_2IccConvertUTF_8hdep">
<area shape="rect" title=" " alt="" coords="237,5,431,31"/>
<area shape="rect" href="../../d5/ddf/a00224.html" title=" " alt="" coords="5,86,215,111"/>
<area shape="poly" title=" " alt="" coords="290,38,143,88,142,83,288,33"/>
<area shape="rect" href="../../d9/dd0/a00191.html" title=" " alt="" coords="239,86,429,111"/>
<area shape="poly" title=" " alt="" coords="337,44,337,86,331,86,331,44"/>
<area shape="rect" href="../../d5/d35/a00266.html" title=" " alt="" coords="453,79,636,119"/>
<area shape="poly" title=" " alt="" coords="378,33,495,76,493,81,376,38"/>
</map>
</div>
</div>
<p><a href="">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:adc71280d09832f0fb6c6b83fbf043140" id="r_adc71280d09832f0fb6c6b83fbf043140"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#adc71280d09832f0fb6c6b83fbf043140">UNI_MAX_BMP</a>&#160;&#160;&#160;(<a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x0000FFFF</td></tr>
<tr class="separator:adc71280d09832f0fb6c6b83fbf043140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98a2f50a1ca513613316ffd384dd1bfb" id="r_a98a2f50a1ca513613316ffd384dd1bfb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#a98a2f50a1ca513613316ffd384dd1bfb">UNI_MAX_LEGAL_UTF32</a>&#160;&#160;&#160;(<a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x0010FFFF</td></tr>
<tr class="separator:a98a2f50a1ca513613316ffd384dd1bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d0ea77d1231214ba0893e846d7fcaf" id="r_a69d0ea77d1231214ba0893e846d7fcaf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#a69d0ea77d1231214ba0893e846d7fcaf">UNI_MAX_UTF16</a>&#160;&#160;&#160;(<a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x0010FFFF</td></tr>
<tr class="separator:a69d0ea77d1231214ba0893e846d7fcaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26c4390ae1463df1e6075ea585ed79a3" id="r_a26c4390ae1463df1e6075ea585ed79a3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#a26c4390ae1463df1e6075ea585ed79a3">UNI_MAX_UTF32</a>&#160;&#160;&#160;(<a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x7FFFFFFF</td></tr>
<tr class="separator:a26c4390ae1463df1e6075ea585ed79a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44b240b95a93f71535c03f5e26d7dbe1" id="r_a44b240b95a93f71535c03f5e26d7dbe1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#a44b240b95a93f71535c03f5e26d7dbe1">UNI_REPLACEMENT_CHAR</a>&#160;&#160;&#160;(<a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x0000FFFD</td></tr>
<tr class="separator:a44b240b95a93f71535c03f5e26d7dbe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:adaac7155d04f98cee33773208b61f3f8" id="r_adaac7155d04f98cee33773208b61f3f8"><td class="memItemLeft" align="right" valign="top">typedef unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#adaac7155d04f98cee33773208b61f3f8">Boolean</a></td></tr>
<tr class="separator:adaac7155d04f98cee33773208b61f3f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50b71724cb39637be87babb9ddbd5822" id="r_a50b71724cb39637be87babb9ddbd5822"><td class="memItemLeft" align="right" valign="top">typedef unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a></td></tr>
<tr class="separator:a50b71724cb39637be87babb9ddbd5822"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a712315a25692d905402a2f4db0ed622d" id="r_a712315a25692d905402a2f4db0ed622d"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d5/d16/a00029.html#af4f9a4c07d8766a12ef62c381593d22e">ICCUINT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a></td></tr>
<tr class="separator:a712315a25692d905402a2f4db0ed622d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafe543c40e242c865f970b57a29122ab" id="r_aafe543c40e242c865f970b57a29122ab"><td class="memItemLeft" align="right" valign="top">typedef unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a></td></tr>
<tr class="separator:aafe543c40e242c865f970b57a29122ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:afdfb6f5dac09ba1b8e138ad4f3a0abbb" id="r_afdfb6f5dac09ba1b8e138ad4f3a0abbb"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a> { <a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a> = 0
, <a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbbac7c2c3c32c7fbed195185e68879e550c">lenientConversion</a>
 }</td></tr>
<tr class="separator:afdfb6f5dac09ba1b8e138ad4f3a0abbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a857080450603c118c1f820f96e2c61d8" id="r_a857080450603c118c1f820f96e2c61d8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> { <a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a52ace604d4b4bfdbb02699abcdfc5856">conversionOK</a>
, <a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8aab3cce3e3d047a29ab541a1284763223">sourceExhausted</a>
, <a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b">targetExhausted</a>
, <a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>
 }</td></tr>
<tr class="separator:a857080450603c118c1f820f96e2c61d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aeb08c40435dd9e4bc81cc2d68d7afe1e" id="r_aeb08c40435dd9e4bc81cc2d68d7afe1e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#aeb08c40435dd9e4bc81cc2d68d7afe1e">icConvertUTF16toUTF32</a> (const <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> **sourceStart, const <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> *sourceEnd, <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> **targetStart, <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> *targetEnd, <a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a> flags)</td></tr>
<tr class="separator:aeb08c40435dd9e4bc81cc2d68d7afe1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8042a5341476a29de35dcb828d11737" id="r_ac8042a5341476a29de35dcb828d11737"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#ac8042a5341476a29de35dcb828d11737">icConvertUTF16toUTF8</a> (const <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> **sourceStart, const <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> *sourceEnd, <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> **targetStart, <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> *targetEnd, <a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a> flags)</td></tr>
<tr class="separator:ac8042a5341476a29de35dcb828d11737"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a12c298e7420f1f4838f849fe84517e" id="r_a0a12c298e7420f1f4838f849fe84517e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#a0a12c298e7420f1f4838f849fe84517e">icConvertUTF32toUTF16</a> (const <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> **sourceStart, const <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> *sourceEnd, <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> **targetStart, <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> *targetEnd, <a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a> flags)</td></tr>
<tr class="separator:a0a12c298e7420f1f4838f849fe84517e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6cb0ccb4262580830ba0ee185489a0" id="r_aba6cb0ccb4262580830ba0ee185489a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#aba6cb0ccb4262580830ba0ee185489a0">icConvertUTF32toUTF8</a> (const <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> **sourceStart, const <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> *sourceEnd, <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> **targetStart, <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> *targetEnd, <a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a> flags)</td></tr>
<tr class="separator:aba6cb0ccb4262580830ba0ee185489a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ce7285764f13667e49e5bf10377b8b8" id="r_a1ce7285764f13667e49e5bf10377b8b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#a1ce7285764f13667e49e5bf10377b8b8">icConvertUTF8toUTF16</a> (const <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> **sourceStart, const <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> *sourceEnd, <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> **targetStart, <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> *targetEnd, <a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a> flags)</td></tr>
<tr class="separator:a1ce7285764f13667e49e5bf10377b8b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3019c94f47fdbae93211314adb1beebd" id="r_a3019c94f47fdbae93211314adb1beebd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#a3019c94f47fdbae93211314adb1beebd">icConvertUTF8toUTF32</a> (const <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> **sourceStart, const <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> *sourceEnd, <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> **targetStart, <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> *targetEnd, <a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a> flags)</td></tr>
<tr class="separator:a3019c94f47fdbae93211314adb1beebd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a2dad2f752ad41ae129928da0d80f5f" id="r_a1a2dad2f752ad41ae129928da0d80f5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d00/a00113.html#adaac7155d04f98cee33773208b61f3f8">Boolean</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d00/a00113.html#a1a2dad2f752ad41ae129928da0d80f5f">icIsLegalUTF8Sequence</a> (const <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> *source, const <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> *sourceEnd)</td></tr>
<tr class="separator:a1a2dad2f752ad41ae129928da0d80f5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="adc71280d09832f0fb6c6b83fbf043140" name="adc71280d09832f0fb6c6b83fbf043140"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc71280d09832f0fb6c6b83fbf043140">&#9670;&#160;</a></span>UNI_MAX_BMP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNI_MAX_BMP&#160;&#160;&#160;(<a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x0000FFFF</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a98a2f50a1ca513613316ffd384dd1bfb" name="a98a2f50a1ca513613316ffd384dd1bfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98a2f50a1ca513613316ffd384dd1bfb">&#9670;&#160;</a></span>UNI_MAX_LEGAL_UTF32</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNI_MAX_LEGAL_UTF32&#160;&#160;&#160;(<a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x0010FFFF</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a69d0ea77d1231214ba0893e846d7fcaf" name="a69d0ea77d1231214ba0893e846d7fcaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69d0ea77d1231214ba0893e846d7fcaf">&#9670;&#160;</a></span>UNI_MAX_UTF16</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNI_MAX_UTF16&#160;&#160;&#160;(<a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x0010FFFF</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a26c4390ae1463df1e6075ea585ed79a3" name="a26c4390ae1463df1e6075ea585ed79a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26c4390ae1463df1e6075ea585ed79a3">&#9670;&#160;</a></span>UNI_MAX_UTF32</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNI_MAX_UTF32&#160;&#160;&#160;(<a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x7FFFFFFF</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a44b240b95a93f71535c03f5e26d7dbe1" name="a44b240b95a93f71535c03f5e26d7dbe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44b240b95a93f71535c03f5e26d7dbe1">&#9670;&#160;</a></span>UNI_REPLACEMENT_CHAR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNI_REPLACEMENT_CHAR&#160;&#160;&#160;(<a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x0000FFFD</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="adaac7155d04f98cee33773208b61f3f8" name="adaac7155d04f98cee33773208b61f3f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaac7155d04f98cee33773208b61f3f8">&#9670;&#160;</a></span>Boolean</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned char <a class="el" href="../../d3/d00/a00113.html#adaac7155d04f98cee33773208b61f3f8">Boolean</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a50b71724cb39637be87babb9ddbd5822" name="a50b71724cb39637be87babb9ddbd5822"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50b71724cb39637be87babb9ddbd5822">&#9670;&#160;</a></span>UTF16</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned short <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a712315a25692d905402a2f4db0ed622d" name="a712315a25692d905402a2f4db0ed622d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a712315a25692d905402a2f4db0ed622d">&#9670;&#160;</a></span>UTF32</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../d5/d16/a00029.html#af4f9a4c07d8766a12ef62c381593d22e">ICCUINT32</a> <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aafe543c40e242c865f970b57a29122ab" name="aafe543c40e242c865f970b57a29122ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafe543c40e242c865f970b57a29122ab">&#9670;&#160;</a></span>UTF8</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned char <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="afdfb6f5dac09ba1b8e138ad4f3a0abbb" name="afdfb6f5dac09ba1b8e138ad4f3a0abbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdfb6f5dac09ba1b8e138ad4f3a0abbb">&#9670;&#160;</a></span>icUtfConversionFlags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40" name="afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40"></a>strictConversion&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="afdfb6f5dac09ba1b8e138ad4f3a0abbbac7c2c3c32c7fbed195185e68879e550c" name="afdfb6f5dac09ba1b8e138ad4f3a0abbbac7c2c3c32c7fbed195185e68879e550c"></a>lenientConversion&#160;</td><td class="fielddoc"></td></tr>
</table>
<div class="fragment"><div class="line"><span class="lineno">  125</span>             {</div>
<div class="line"><span class="lineno">  126</span>  <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a> = 0,</div>
<div class="line"><span class="lineno">  127</span>  <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbbac7c2c3c32c7fbed195185e68879e550c">lenientConversion</a></div>
<div class="line"><span class="lineno">  128</span>} <a class="code hl_enumeration" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a>;</div>
<div class="ttc" id="aa00113_html_afdfb6f5dac09ba1b8e138ad4f3a0abbb"><div class="ttname"><a href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a></div><div class="ttdeci">icUtfConversionFlags</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:125</div></div>
<div class="ttc" id="aa00113_html_afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40"><div class="ttname"><a href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a></div><div class="ttdeci">@ strictConversion</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:126</div></div>
<div class="ttc" id="aa00113_html_afdfb6f5dac09ba1b8e138ad4f3a0abbbac7c2c3c32c7fbed195185e68879e550c"><div class="ttname"><a href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbbac7c2c3c32c7fbed195185e68879e550c">lenientConversion</a></div><div class="ttdeci">@ lenientConversion</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:127</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a857080450603c118c1f820f96e2c61d8" name="a857080450603c118c1f820f96e2c61d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a857080450603c118c1f820f96e2c61d8">&#9670;&#160;</a></span>icUtfConversionResult</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a857080450603c118c1f820f96e2c61d8a52ace604d4b4bfdbb02699abcdfc5856" name="a857080450603c118c1f820f96e2c61d8a52ace604d4b4bfdbb02699abcdfc5856"></a>conversionOK&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a857080450603c118c1f820f96e2c61d8aab3cce3e3d047a29ab541a1284763223" name="a857080450603c118c1f820f96e2c61d8aab3cce3e3d047a29ab541a1284763223"></a>sourceExhausted&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b" name="a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b"></a>targetExhausted&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631" name="a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631"></a>sourceIllegal&#160;</td><td class="fielddoc"></td></tr>
</table>
<div class="fragment"><div class="line"><span class="lineno">  118</span>             {</div>
<div class="line"><span class="lineno">  119</span>  <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a52ace604d4b4bfdbb02699abcdfc5856">conversionOK</a>,         <span class="comment">/* conversion successful */</span></div>
<div class="line"><span class="lineno">  120</span>  <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8aab3cce3e3d047a29ab541a1284763223">sourceExhausted</a>,  <span class="comment">/* partial character in source, but hit end */</span></div>
<div class="line"><span class="lineno">  121</span>  <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b">targetExhausted</a>,  <span class="comment">/* insuff. room in target for conversion */</span></div>
<div class="line"><span class="lineno">  122</span>  <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>     <span class="comment">/* source sequence is illegal/malformed */</span></div>
<div class="line"><span class="lineno">  123</span>} <a class="code hl_enumeration" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a>;</div>
<div class="ttc" id="aa00113_html_a857080450603c118c1f820f96e2c61d8"><div class="ttname"><a href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a></div><div class="ttdeci">icUtfConversionResult</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:118</div></div>
<div class="ttc" id="aa00113_html_a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b"><div class="ttname"><a href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b">targetExhausted</a></div><div class="ttdeci">@ targetExhausted</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:121</div></div>
<div class="ttc" id="aa00113_html_a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631"><div class="ttname"><a href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a></div><div class="ttdeci">@ sourceIllegal</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:122</div></div>
<div class="ttc" id="aa00113_html_a857080450603c118c1f820f96e2c61d8a52ace604d4b4bfdbb02699abcdfc5856"><div class="ttname"><a href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a52ace604d4b4bfdbb02699abcdfc5856">conversionOK</a></div><div class="ttdeci">@ conversionOK</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:119</div></div>
<div class="ttc" id="aa00113_html_a857080450603c118c1f820f96e2c61d8aab3cce3e3d047a29ab541a1284763223"><div class="ttname"><a href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8aab3cce3e3d047a29ab541a1284763223">sourceExhausted</a></div><div class="ttdeci">@ sourceExhausted</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:120</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aeb08c40435dd9e4bc81cc2d68d7afe1e" name="aeb08c40435dd9e4bc81cc2d68d7afe1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb08c40435dd9e4bc81cc2d68d7afe1e">&#9670;&#160;</a></span>icConvertUTF16toUTF32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a> icConvertUTF16toUTF32 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> **&#160;</td>
          <td class="paramname"><em>sourceStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> *&#160;</td>
          <td class="paramname"><em>sourceEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> **&#160;</td>
          <td class="paramname"><em>targetStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> *&#160;</td>
          <td class="paramname"><em>targetEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  149</span>{</div>
<div class="line"><span class="lineno">  150</span>  <a class="code hl_enumeration" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a52ace604d4b4bfdbb02699abcdfc5856">conversionOK</a>;</div>
<div class="line"><span class="lineno">  151</span>  <span class="keyword">const</span> <a class="code hl_typedef" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a>* source = *sourceStart;</div>
<div class="line"><span class="lineno">  152</span>  <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>* target = *targetStart;</div>
<div class="line"><span class="lineno">  153</span>  <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> ch, ch2;</div>
<div class="line"><span class="lineno">  154</span>  <span class="keywordflow">while</span> (source &lt; sourceEnd) {</div>
<div class="line"><span class="lineno">  155</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a>* oldSource = source; <span class="comment">/*  In case we have to back up because of target overflow. */</span></div>
<div class="line"><span class="lineno">  156</span>    ch = *source++;</div>
<div class="line"><span class="lineno">  157</span>    <span class="comment">/* If we have a surrogate pair, convert to UTF32 first. */</span></div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">if</span> (ch &gt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#a4ab84eb26356a90f3b7b9ac7aca1edfe">UNI_SUR_HIGH_START</a> &amp;&amp; ch &lt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#ae5481872f1061e4e2a66849802b4b81e">UNI_SUR_HIGH_END</a>) {</div>
<div class="line"><span class="lineno">  159</span>      <span class="comment">/* If the 16 bits following the high surrogate are in the source buffer... */</span></div>
<div class="line"><span class="lineno">  160</span>      <span class="keywordflow">if</span> (source &lt; sourceEnd) {</div>
<div class="line"><span class="lineno">  161</span>        ch2 = *source;</div>
<div class="line"><span class="lineno">  162</span>        <span class="comment">/* If it&#39;s a low surrogate, convert to UTF32. */</span></div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordflow">if</span> (ch2 &gt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#a23de5862375b48afcb4e3ff7b56a274d">UNI_SUR_LOW_START</a> &amp;&amp; ch2 &lt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#ab9a531ffb73be79f7089049c1b84dc59">UNI_SUR_LOW_END</a>) {</div>
<div class="line"><span class="lineno">  164</span>          ch = ((ch - <a class="code hl_define" href="../../d5/ddf/a00224.html#a4ab84eb26356a90f3b7b9ac7aca1edfe">UNI_SUR_HIGH_START</a>) &lt;&lt; <a class="code hl_variable" href="../../d5/ddf/a00224.html#a9023510776bb97137517b59d39edbc3a">halfShift</a>)</div>
<div class="line"><span class="lineno">  165</span>            + (ch2 - <a class="code hl_define" href="../../d5/ddf/a00224.html#a23de5862375b48afcb4e3ff7b56a274d">UNI_SUR_LOW_START</a>) + <a class="code hl_variable" href="../../d5/ddf/a00224.html#a8e6fc083a9b22a0116b35c73a50b8c18">halfBase</a>;</div>
<div class="line"><span class="lineno">  166</span>          ++source;</div>
<div class="line"><span class="lineno">  167</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a>) { <span class="comment">/* it&#39;s an unpaired high surrogate */</span></div>
<div class="line"><span class="lineno">  168</span>          --source; <span class="comment">/* return to the illegal value itself */</span></div>
<div class="line"><span class="lineno">  169</span>          result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">  170</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  171</span>        }</div>
<div class="line"><span class="lineno">  172</span>      } <span class="keywordflow">else</span> { <span class="comment">/* We don&#39;t have the 16 bits following the high surrogate. */</span></div>
<div class="line"><span class="lineno">  173</span>        --source; <span class="comment">/* return to the high surrogate */</span></div>
<div class="line"><span class="lineno">  174</span>        result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8aab3cce3e3d047a29ab541a1284763223">sourceExhausted</a>;</div>
<div class="line"><span class="lineno">  175</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  176</span>      }</div>
<div class="line"><span class="lineno">  177</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a>) {</div>
<div class="line"><span class="lineno">  178</span>      <span class="comment">/* UTF-16 surrogate values are illegal in UTF-32 */</span></div>
<div class="line"><span class="lineno">  179</span>      <span class="keywordflow">if</span> (ch &gt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#a23de5862375b48afcb4e3ff7b56a274d">UNI_SUR_LOW_START</a> &amp;&amp; ch &lt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#ab9a531ffb73be79f7089049c1b84dc59">UNI_SUR_LOW_END</a>) {</div>
<div class="line"><span class="lineno">  180</span>        --source; <span class="comment">/* return to the illegal value itself */</span></div>
<div class="line"><span class="lineno">  181</span>        result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">  182</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  183</span>      }</div>
<div class="line"><span class="lineno">  184</span>    }</div>
<div class="line"><span class="lineno">  185</span>    <span class="keywordflow">if</span> (target &gt;= targetEnd) {</div>
<div class="line"><span class="lineno">  186</span>      source = oldSource; <span class="comment">/* Back up source pointer! */</span></div>
<div class="line"><span class="lineno">  187</span>      result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b">targetExhausted</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  188</span>    }</div>
<div class="line"><span class="lineno">  189</span>    *target++ = ch;</div>
<div class="line"><span class="lineno">  190</span>  }</div>
<div class="line"><span class="lineno">  191</span>  *sourceStart = source;</div>
<div class="line"><span class="lineno">  192</span>  *targetStart = target;</div>
<div class="line"><span class="lineno">  193</span><span class="preprocessor">#ifdef CVTUTF_DEBUG</span></div>
<div class="line"><span class="lineno">  194</span>  <span class="keywordflow">if</span> (result == <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>) {</div>
<div class="line"><span class="lineno">  195</span>    fprintf(stderr, <span class="stringliteral">&quot;ConvertUTF16toUTF32 illegal seq 0x%04x,%04x\n&quot;</span>, ch, ch2);</div>
<div class="line"><span class="lineno">  196</span>    fflush(stderr);</div>
<div class="line"><span class="lineno">  197</span>  }</div>
<div class="line"><span class="lineno">  198</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  199</span>  <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  200</span>}</div>
<div class="ttc" id="aa00113_html_a50b71724cb39637be87babb9ddbd5822"><div class="ttname"><a href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a></div><div class="ttdeci">unsigned short UTF16</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:107</div></div>
<div class="ttc" id="aa00113_html_a712315a25692d905402a2f4db0ed622d"><div class="ttname"><a href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a></div><div class="ttdeci">ICCUINT32 UTF32</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:106</div></div>
<div class="ttc" id="aa00224_html_a23de5862375b48afcb4e3ff7b56a274d"><div class="ttname"><a href="../../d5/ddf/a00224.html#a23de5862375b48afcb4e3ff7b56a274d">UNI_SUR_LOW_START</a></div><div class="ttdeci">#define UNI_SUR_LOW_START</div><div class="ttdef"><b>Definition</b> IccConvertUTF.cpp:54</div></div>
<div class="ttc" id="aa00224_html_a4ab84eb26356a90f3b7b9ac7aca1edfe"><div class="ttname"><a href="../../d5/ddf/a00224.html#a4ab84eb26356a90f3b7b9ac7aca1edfe">UNI_SUR_HIGH_START</a></div><div class="ttdeci">#define UNI_SUR_HIGH_START</div><div class="ttdef"><b>Definition</b> IccConvertUTF.cpp:52</div></div>
<div class="ttc" id="aa00224_html_a8e6fc083a9b22a0116b35c73a50b8c18"><div class="ttname"><a href="../../d5/ddf/a00224.html#a8e6fc083a9b22a0116b35c73a50b8c18">halfBase</a></div><div class="ttdeci">static const UTF32 halfBase</div><div class="ttdef"><b>Definition</b> IccConvertUTF.cpp:49</div></div>
<div class="ttc" id="aa00224_html_a9023510776bb97137517b59d39edbc3a"><div class="ttname"><a href="../../d5/ddf/a00224.html#a9023510776bb97137517b59d39edbc3a">halfShift</a></div><div class="ttdeci">static const int halfShift</div><div class="ttdef"><b>Definition</b> IccConvertUTF.cpp:47</div></div>
<div class="ttc" id="aa00224_html_ab9a531ffb73be79f7089049c1b84dc59"><div class="ttname"><a href="../../d5/ddf/a00224.html#ab9a531ffb73be79f7089049c1b84dc59">UNI_SUR_LOW_END</a></div><div class="ttdeci">#define UNI_SUR_LOW_END</div><div class="ttdef"><b>Definition</b> IccConvertUTF.cpp:55</div></div>
<div class="ttc" id="aa00224_html_ae5481872f1061e4e2a66849802b4b81e"><div class="ttname"><a href="../../d5/ddf/a00224.html#ae5481872f1061e4e2a66849802b4b81e">UNI_SUR_HIGH_END</a></div><div class="ttdeci">#define UNI_SUR_HIGH_END</div><div class="ttdef"><b>Definition</b> IccConvertUTF.cpp:53</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00119">conversionOK</a>, <a class="el" href="../../#l00049">halfBase</a>, <a class="el" href="../../#l00047">halfShift</a>, <a class="el" href="../../#l00120">sourceExhausted</a>, <a class="el" href="../../#l00122">sourceIllegal</a>, <a class="el" href="../../#l00126">strictConversion</a>, and <a class="el" href="../../#l00121">targetExhausted</a>.</p>

</div>
</div>
<a id="ac8042a5341476a29de35dcb828d11737" name="ac8042a5341476a29de35dcb828d11737"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8042a5341476a29de35dcb828d11737">&#9670;&#160;</a></span>icConvertUTF16toUTF8()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a> icConvertUTF16toUTF8 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> **&#160;</td>
          <td class="paramname"><em>sourceStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> *&#160;</td>
          <td class="paramname"><em>sourceEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> **&#160;</td>
          <td class="paramname"><em>targetStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> *&#160;</td>
          <td class="paramname"><em>targetEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  301</span>{</div>
<div class="line"><span class="lineno">  302</span>  <a class="code hl_enumeration" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a52ace604d4b4bfdbb02699abcdfc5856">conversionOK</a>;</div>
<div class="line"><span class="lineno">  303</span>  <span class="keyword">const</span> <a class="code hl_typedef" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a>* source = *sourceStart;</div>
<div class="line"><span class="lineno">  304</span>  <a class="code hl_typedef" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a>* target = *targetStart;</div>
<div class="line"><span class="lineno">  305</span>  <span class="keywordflow">while</span> (source &lt; sourceEnd) {</div>
<div class="line"><span class="lineno">  306</span>    <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> ch;</div>
<div class="line"><span class="lineno">  307</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> bytesToWrite = 0;</div>
<div class="line"><span class="lineno">  308</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> byteMask = 0xBF;</div>
<div class="line"><span class="lineno">  309</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> byteMark = 0x80; </div>
<div class="line"><span class="lineno">  310</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a>* oldSource = source; <span class="comment">/* In case we have to back up because of target overflow. */</span></div>
<div class="line"><span class="lineno">  311</span>    ch = *source++;</div>
<div class="line"><span class="lineno">  312</span>    <span class="comment">/* If we have a surrogate pair, convert to UTF32 first. */</span></div>
<div class="line"><span class="lineno">  313</span>    <span class="keywordflow">if</span> (ch &gt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#a4ab84eb26356a90f3b7b9ac7aca1edfe">UNI_SUR_HIGH_START</a> &amp;&amp; ch &lt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#ae5481872f1061e4e2a66849802b4b81e">UNI_SUR_HIGH_END</a>) {</div>
<div class="line"><span class="lineno">  314</span>      <span class="comment">/* If the 16 bits following the high surrogate are in the source buffer... */</span></div>
<div class="line"><span class="lineno">  315</span>      <span class="keywordflow">if</span> (source &lt; sourceEnd) {</div>
<div class="line"><span class="lineno">  316</span>        <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> ch2 = *source;</div>
<div class="line"><span class="lineno">  317</span>        <span class="comment">/* If it&#39;s a low surrogate, convert to UTF32. */</span></div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordflow">if</span> (ch2 &gt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#a23de5862375b48afcb4e3ff7b56a274d">UNI_SUR_LOW_START</a> &amp;&amp; ch2 &lt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#ab9a531ffb73be79f7089049c1b84dc59">UNI_SUR_LOW_END</a>) {</div>
<div class="line"><span class="lineno">  319</span>          ch = ((ch - <a class="code hl_define" href="../../d5/ddf/a00224.html#a4ab84eb26356a90f3b7b9ac7aca1edfe">UNI_SUR_HIGH_START</a>) &lt;&lt; <a class="code hl_variable" href="../../d5/ddf/a00224.html#a9023510776bb97137517b59d39edbc3a">halfShift</a>)</div>
<div class="line"><span class="lineno">  320</span>            + (ch2 - <a class="code hl_define" href="../../d5/ddf/a00224.html#a23de5862375b48afcb4e3ff7b56a274d">UNI_SUR_LOW_START</a>) + <a class="code hl_variable" href="../../d5/ddf/a00224.html#a8e6fc083a9b22a0116b35c73a50b8c18">halfBase</a>;</div>
<div class="line"><span class="lineno">  321</span>          ++source;</div>
<div class="line"><span class="lineno">  322</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a>) { <span class="comment">/* it&#39;s an unpaired high surrogate */</span></div>
<div class="line"><span class="lineno">  323</span>          --source; <span class="comment">/* return to the illegal value itself */</span></div>
<div class="line"><span class="lineno">  324</span>          result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">  325</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  326</span>        }</div>
<div class="line"><span class="lineno">  327</span>      } <span class="keywordflow">else</span> { <span class="comment">/* We don&#39;t have the 16 bits following the high surrogate. */</span></div>
<div class="line"><span class="lineno">  328</span>        --source; <span class="comment">/* return to the high surrogate */</span></div>
<div class="line"><span class="lineno">  329</span>        result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8aab3cce3e3d047a29ab541a1284763223">sourceExhausted</a>;</div>
<div class="line"><span class="lineno">  330</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  331</span>      }</div>
<div class="line"><span class="lineno">  332</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a>) {</div>
<div class="line"><span class="lineno">  333</span>      <span class="comment">/* UTF-16 surrogate values are illegal in UTF-32 */</span></div>
<div class="line"><span class="lineno">  334</span>      <span class="keywordflow">if</span> (ch &gt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#a23de5862375b48afcb4e3ff7b56a274d">UNI_SUR_LOW_START</a> &amp;&amp; ch &lt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#ab9a531ffb73be79f7089049c1b84dc59">UNI_SUR_LOW_END</a>) {</div>
<div class="line"><span class="lineno">  335</span>        --source; <span class="comment">/* return to the illegal value itself */</span></div>
<div class="line"><span class="lineno">  336</span>        result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">  337</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  338</span>      }</div>
<div class="line"><span class="lineno">  339</span>    }</div>
<div class="line"><span class="lineno">  340</span>    <span class="comment">/* Figure out how many bytes the result will require */</span></div>
<div class="line"><span class="lineno">  341</span>    <span class="keywordflow">if</span> (ch &lt; (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x80) {      bytesToWrite = 1;</div>
<div class="line"><span class="lineno">  342</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch &lt; (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x800) {     bytesToWrite = 2;</div>
<div class="line"><span class="lineno">  343</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch &lt; (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x10000) {   bytesToWrite = 3;</div>
<div class="line"><span class="lineno">  344</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch &lt; (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x110000) {  bytesToWrite = 4;</div>
<div class="line"><span class="lineno">  345</span>    } <span class="keywordflow">else</span> {                bytesToWrite = 3;</div>
<div class="line"><span class="lineno">  346</span>    ch = <a class="code hl_define" href="../../d3/d00/a00113.html#a44b240b95a93f71535c03f5e26d7dbe1">UNI_REPLACEMENT_CHAR</a>;</div>
<div class="line"><span class="lineno">  347</span>    }</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>    target += bytesToWrite;</div>
<div class="line"><span class="lineno">  350</span>    <span class="keywordflow">if</span> (target &gt; targetEnd) {</div>
<div class="line"><span class="lineno">  351</span>      source = oldSource; <span class="comment">/* Back up source pointer! */</span></div>
<div class="line"><span class="lineno">  352</span>      target -= bytesToWrite; result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b">targetExhausted</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  353</span>    }</div>
<div class="line"><span class="lineno">  354</span>    <span class="keywordflow">switch</span> (bytesToWrite) { <span class="comment">/* note: everything falls through. */</span></div>
<div class="line"><span class="lineno">  355</span>      <span class="keywordflow">case</span> 4: *--target = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a>)((ch | byteMark) &amp; byteMask); ch &gt;&gt;= 6;</div>
<div class="line"><span class="lineno">  356</span>      <span class="keywordflow">case</span> 3: *--target = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a>)((ch | byteMark) &amp; byteMask); ch &gt;&gt;= 6;</div>
<div class="line"><span class="lineno">  357</span>      <span class="keywordflow">case</span> 2: *--target = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a>)((ch | byteMark) &amp; byteMask); ch &gt;&gt;= 6;</div>
<div class="line"><span class="lineno">  358</span>      <span class="keywordflow">case</span> 1: *--target =  (<a class="code hl_typedef" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a>)(ch | <a class="code hl_variable" href="../../d5/ddf/a00224.html#a84be1e52702338d8e7aaeb1c2da2b375">firstByteMark</a>[bytesToWrite]);</div>
<div class="line"><span class="lineno">  359</span>    }</div>
<div class="line"><span class="lineno">  360</span>    target += bytesToWrite;</div>
<div class="line"><span class="lineno">  361</span>  }</div>
<div class="line"><span class="lineno">  362</span>  *sourceStart = source;</div>
<div class="line"><span class="lineno">  363</span>  *targetStart = target;</div>
<div class="line"><span class="lineno">  364</span>  <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  365</span>}</div>
<div class="ttc" id="aa00113_html_a44b240b95a93f71535c03f5e26d7dbe1"><div class="ttname"><a href="../../d3/d00/a00113.html#a44b240b95a93f71535c03f5e26d7dbe1">UNI_REPLACEMENT_CHAR</a></div><div class="ttdeci">#define UNI_REPLACEMENT_CHAR</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:112</div></div>
<div class="ttc" id="aa00113_html_aafe543c40e242c865f970b57a29122ab"><div class="ttname"><a href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a></div><div class="ttdeci">unsigned char UTF8</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:108</div></div>
<div class="ttc" id="aa00224_html_a84be1e52702338d8e7aaeb1c2da2b375"><div class="ttname"><a href="../../d5/ddf/a00224.html#a84be1e52702338d8e7aaeb1c2da2b375">firstByteMark</a></div><div class="ttdeci">static const UTF8 firstByteMark[7]</div><div class="ttdef"><b>Definition</b> IccConvertUTF.cpp:285</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00119">conversionOK</a>, <a class="el" href="../../#l00285">firstByteMark</a>, <a class="el" href="../../#l00049">halfBase</a>, <a class="el" href="../../#l00047">halfShift</a>, <a class="el" href="../../#l00120">sourceExhausted</a>, <a class="el" href="../../#l00122">sourceIllegal</a>, <a class="el" href="../../#l00126">strictConversion</a>, and <a class="el" href="../../#l00121">targetExhausted</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00341">icUtf16ToUtf8()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/d00/a00113_ac8042a5341476a29de35dcb828d11737_icgraph.png" border="0" usemap="#ad3/d00/a00113_ac8042a5341476a29de35dcb828d11737_icgraph" alt=""/></div>
<map name="ad3/d00/a00113_ac8042a5341476a29de35dcb828d11737_icgraph" id="ad3/d00/a00113_ac8042a5341476a29de35dcb828d11737_icgraph">
<area shape="rect" title=" " alt="" coords="413,127,587,152"/>
<area shape="rect" href="../../d5/d35/a00266.html#a5375769a600dcfbde6aa6b4a7f383ce5" title=" " alt="" coords="255,127,365,152"/>
<area shape="poly" title=" " alt="" coords="400,142,366,142,366,137,400,137"/>
<area shape="rect" href="../../db/ddd/a02089.html#a3103facd65438b09816f9b967567ad93" title=" " alt="" coords="17,5,195,31"/>
<area shape="poly" title=" " alt="" coords="288,118,252,80,205,46,175,33,177,28,208,41,256,76,292,114"/>
<area shape="rect" href="../../d7/db1/a01837.html#a237b1ad09fe25ec7be340b0087a799ed" title=" " alt="" coords="7,55,205,95"/>
<area shape="poly" title=" " alt="" coords="255,125,170,98,171,93,257,120"/>
<area shape="rect" href="../../d7/d9c/a01885.html#a38e9548763954f73c29b8bc8ce0f5b5d" title=" " alt="" coords="11,119,201,159"/>
<area shape="poly" title=" " alt="" coords="241,142,201,142,201,137,241,137"/>
<area shape="rect" href="../../d2/d23/a01961.html#a41908f2a338b06b71d5291aaa8ac1532" title=" " alt="" coords="5,183,207,223"/>
<area shape="poly" title=" " alt="" coords="257,159,171,186,170,181,255,154"/>
<area shape="rect" href="../../d6/d9a/a01965.html#a392a644105c454e2f0aa9b9b7b69a6d6" title=" " alt="" coords="21,248,191,273"/>
<area shape="poly" title=" " alt="" coords="292,164,256,202,208,238,177,250,175,245,205,233,252,198,288,161"/>
</map>
</div>

</div>
</div>
<a id="a0a12c298e7420f1f4838f849fe84517e" name="a0a12c298e7420f1f4838f849fe84517e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a12c298e7420f1f4838f849fe84517e">&#9670;&#160;</a></span>icConvertUTF32toUTF16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a> icConvertUTF32toUTF16 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> **&#160;</td>
          <td class="paramname"><em>sourceStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> *&#160;</td>
          <td class="paramname"><em>sourceEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> **&#160;</td>
          <td class="paramname"><em>targetStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> *&#160;</td>
          <td class="paramname"><em>targetEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   63</span>{</div>
<div class="line"><span class="lineno">   64</span>  <a class="code hl_enumeration" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a52ace604d4b4bfdbb02699abcdfc5856">conversionOK</a>;</div>
<div class="line"><span class="lineno">   65</span>  <span class="keyword">const</span> <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>* source = *sourceStart;</div>
<div class="line"><span class="lineno">   66</span>  <a class="code hl_typedef" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a>* target = *targetStart;</div>
<div class="line"><span class="lineno">   67</span>  <span class="keywordflow">while</span> (source &lt; sourceEnd) {</div>
<div class="line"><span class="lineno">   68</span>    <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> ch;</div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordflow">if</span> (target &gt;= targetEnd) {</div>
<div class="line"><span class="lineno">   70</span>      result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b">targetExhausted</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   71</span>    }</div>
<div class="line"><span class="lineno">   72</span>    ch = *source++;</div>
<div class="line"><span class="lineno">   73</span>    <span class="keywordflow">if</span> (ch &lt;= <a class="code hl_define" href="../../d3/d00/a00113.html#adc71280d09832f0fb6c6b83fbf043140">UNI_MAX_BMP</a>) { <span class="comment">/* Target is a character &lt;= 0xFFFF */</span></div>
<div class="line"><span class="lineno">   74</span>      <span class="comment">/* UTF-16 surrogate values are illegal in UTF-32; 0xffff or 0xfffe are both reserved values */</span></div>
<div class="line"><span class="lineno">   75</span>      <span class="keywordflow">if</span> (ch &gt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#a4ab84eb26356a90f3b7b9ac7aca1edfe">UNI_SUR_HIGH_START</a> &amp;&amp; ch &lt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#ab9a531ffb73be79f7089049c1b84dc59">UNI_SUR_LOW_END</a>) {</div>
<div class="line"><span class="lineno">   76</span>        <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a>) {</div>
<div class="line"><span class="lineno">   77</span>          --source; <span class="comment">/* return to the illegal value itself */</span></div>
<div class="line"><span class="lineno">   78</span>          result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">   79</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   80</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   81</span>          *target++ = <a class="code hl_define" href="../../d3/d00/a00113.html#a44b240b95a93f71535c03f5e26d7dbe1">UNI_REPLACEMENT_CHAR</a>;</div>
<div class="line"><span class="lineno">   82</span>        }</div>
<div class="line"><span class="lineno">   83</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   84</span>        *target++ = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a>)ch; <span class="comment">/* normal case */</span></div>
<div class="line"><span class="lineno">   85</span>      }</div>
<div class="line"><span class="lineno">   86</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch &gt; <a class="code hl_define" href="../../d3/d00/a00113.html#a98a2f50a1ca513613316ffd384dd1bfb">UNI_MAX_LEGAL_UTF32</a>) {</div>
<div class="line"><span class="lineno">   87</span>      <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a>) {</div>
<div class="line"><span class="lineno">   88</span>        result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">   89</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   90</span>        *target++ = <a class="code hl_define" href="../../d3/d00/a00113.html#a44b240b95a93f71535c03f5e26d7dbe1">UNI_REPLACEMENT_CHAR</a>;</div>
<div class="line"><span class="lineno">   91</span>      }</div>
<div class="line"><span class="lineno">   92</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   93</span>      <span class="comment">/* target is a character in range 0xFFFF - 0x10FFFF. */</span></div>
<div class="line"><span class="lineno">   94</span>      <span class="keywordflow">if</span> (target + 1 &gt;= targetEnd) {</div>
<div class="line"><span class="lineno">   95</span>        --source; <span class="comment">/* Back up source pointer! */</span></div>
<div class="line"><span class="lineno">   96</span>        result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b">targetExhausted</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   97</span>      }</div>
<div class="line"><span class="lineno">   98</span>      ch -= <a class="code hl_variable" href="../../d5/ddf/a00224.html#a8e6fc083a9b22a0116b35c73a50b8c18">halfBase</a>;</div>
<div class="line"><span class="lineno">   99</span>      *target++ = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a>)((ch &gt;&gt; <a class="code hl_variable" href="../../d5/ddf/a00224.html#a9023510776bb97137517b59d39edbc3a">halfShift</a>) + <a class="code hl_define" href="../../d5/ddf/a00224.html#a4ab84eb26356a90f3b7b9ac7aca1edfe">UNI_SUR_HIGH_START</a>);</div>
<div class="line"><span class="lineno">  100</span>      *target++ = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a>)((ch &amp; <a class="code hl_variable" href="../../d5/ddf/a00224.html#a3eb375b25f02aaecedb92086ff2a7af3">halfMask</a>) + <a class="code hl_define" href="../../d5/ddf/a00224.html#a23de5862375b48afcb4e3ff7b56a274d">UNI_SUR_LOW_START</a>);</div>
<div class="line"><span class="lineno">  101</span>    }</div>
<div class="line"><span class="lineno">  102</span>  }</div>
<div class="line"><span class="lineno">  103</span>  *sourceStart = source;</div>
<div class="line"><span class="lineno">  104</span>  *targetStart = target;</div>
<div class="line"><span class="lineno">  105</span>  <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  106</span>}</div>
<div class="ttc" id="aa00113_html_a98a2f50a1ca513613316ffd384dd1bfb"><div class="ttname"><a href="../../d3/d00/a00113.html#a98a2f50a1ca513613316ffd384dd1bfb">UNI_MAX_LEGAL_UTF32</a></div><div class="ttdeci">#define UNI_MAX_LEGAL_UTF32</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:116</div></div>
<div class="ttc" id="aa00113_html_adc71280d09832f0fb6c6b83fbf043140"><div class="ttname"><a href="../../d3/d00/a00113.html#adc71280d09832f0fb6c6b83fbf043140">UNI_MAX_BMP</a></div><div class="ttdeci">#define UNI_MAX_BMP</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:113</div></div>
<div class="ttc" id="aa00224_html_a3eb375b25f02aaecedb92086ff2a7af3"><div class="ttname"><a href="../../d5/ddf/a00224.html#a3eb375b25f02aaecedb92086ff2a7af3">halfMask</a></div><div class="ttdeci">static const UTF32 halfMask</div><div class="ttdef"><b>Definition</b> IccConvertUTF.cpp:50</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00119">conversionOK</a>, <a class="el" href="../../#l00049">halfBase</a>, <a class="el" href="../../#l00050">halfMask</a>, <a class="el" href="../../#l00047">halfShift</a>, <a class="el" href="../../#l00122">sourceIllegal</a>, <a class="el" href="../../#l00126">strictConversion</a>, and <a class="el" href="../../#l00121">targetExhausted</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l07333">CIccLocalizedUnicode::SetText()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/d00/a00113_a0a12c298e7420f1f4838f849fe84517e_icgraph.png" border="0" usemap="#ad3/d00/a00113_a0a12c298e7420f1f4838f849fe84517e_icgraph" alt=""/></div>
<map name="ad3/d00/a00113_a0a12c298e7420f1f4838f849fe84517e_icgraph" id="ad3/d00/a00113_a0a12c298e7420f1f4838f849fe84517e_icgraph">
<area shape="rect" title=" " alt="" coords="483,45,664,70"/>
<area shape="rect" href="../../dc/d99/a01053.html#a365aeff5cd79f87ebbae5ec71789ce95" title=" " alt="" coords="272,37,435,77"/>
<area shape="poly" title=" " alt="" coords="469,60,435,60,435,55,469,55"/>
<area shape="rect" href="../../dc/d99/a01053.html#ae0c90fac5fb3541983f1ba3599c02e04" title=" " alt="" coords="33,5,196,45"/>
<area shape="poly" title=" " alt="" coords="258,47,196,39,197,34,258,42"/>
<area shape="rect" href="../../d2/db8/a01057.html#a446763061a78ba907cf91540b68ae2ee" title=" " alt="" coords="5,69,224,109"/>
<area shape="poly" title=" " alt="" coords="258,73,225,77,224,72,258,67"/>
</map>
</div>

</div>
</div>
<a id="aba6cb0ccb4262580830ba0ee185489a0" name="aba6cb0ccb4262580830ba0ee185489a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba6cb0ccb4262580830ba0ee185489a0">&#9670;&#160;</a></span>icConvertUTF32toUTF8()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a> icConvertUTF32toUTF8 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> **&#160;</td>
          <td class="paramname"><em>sourceStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> *&#160;</td>
          <td class="paramname"><em>sourceEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> **&#160;</td>
          <td class="paramname"><em>targetStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> *&#160;</td>
          <td class="paramname"><em>targetEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  624</span>{</div>
<div class="line"><span class="lineno">  625</span>  <a class="code hl_enumeration" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a52ace604d4b4bfdbb02699abcdfc5856">conversionOK</a>;</div>
<div class="line"><span class="lineno">  626</span>  <span class="keyword">const</span> <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>* source = *sourceStart;</div>
<div class="line"><span class="lineno">  627</span>  <a class="code hl_typedef" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a>* target = *targetStart;</div>
<div class="line"><span class="lineno">  628</span>  <span class="keywordflow">while</span> (source &lt; sourceEnd) {</div>
<div class="line"><span class="lineno">  629</span>    <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> ch;</div>
<div class="line"><span class="lineno">  630</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> bytesToWrite = 0;</div>
<div class="line"><span class="lineno">  631</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> byteMask = 0xBF;</div>
<div class="line"><span class="lineno">  632</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> byteMark = 0x80; </div>
<div class="line"><span class="lineno">  633</span>    ch = *source++;</div>
<div class="line"><span class="lineno">  634</span>    <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a> ) {</div>
<div class="line"><span class="lineno">  635</span>      <span class="comment">/* UTF-16 surrogate values are illegal in UTF-32 */</span></div>
<div class="line"><span class="lineno">  636</span>      <span class="keywordflow">if</span> (ch &gt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#a4ab84eb26356a90f3b7b9ac7aca1edfe">UNI_SUR_HIGH_START</a> &amp;&amp; ch &lt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#ab9a531ffb73be79f7089049c1b84dc59">UNI_SUR_LOW_END</a>) {</div>
<div class="line"><span class="lineno">  637</span>        --source; <span class="comment">/* return to the illegal value itself */</span></div>
<div class="line"><span class="lineno">  638</span>        result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">  639</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  640</span>      }</div>
<div class="line"><span class="lineno">  641</span>    }</div>
<div class="line"><span class="lineno">  642</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  643</span><span class="comment">    * Figure out how many bytes the result will require. Turn any</span></div>
<div class="line"><span class="lineno">  644</span><span class="comment">    * illegally large UTF32 things (&gt; Plane 17) into replacement chars.</span></div>
<div class="line"><span class="lineno">  645</span><span class="comment">    */</span></div>
<div class="line"><span class="lineno">  646</span>    <span class="keywordflow">if</span> (ch &lt; (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x80) {      bytesToWrite = 1;</div>
<div class="line"><span class="lineno">  647</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch &lt; (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x800) {     bytesToWrite = 2;</div>
<div class="line"><span class="lineno">  648</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch &lt; (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>)0x10000) {   bytesToWrite = 3;</div>
<div class="line"><span class="lineno">  649</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch &lt;= <a class="code hl_define" href="../../d3/d00/a00113.html#a98a2f50a1ca513613316ffd384dd1bfb">UNI_MAX_LEGAL_UTF32</a>) {  bytesToWrite = 4;</div>
<div class="line"><span class="lineno">  650</span>    } <span class="keywordflow">else</span> {                bytesToWrite = 3;</div>
<div class="line"><span class="lineno">  651</span>    ch = <a class="code hl_define" href="../../d3/d00/a00113.html#a44b240b95a93f71535c03f5e26d7dbe1">UNI_REPLACEMENT_CHAR</a>;</div>
<div class="line"><span class="lineno">  652</span>    result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">  653</span>    }</div>
<div class="line"><span class="lineno">  654</span> </div>
<div class="line"><span class="lineno">  655</span>    target += bytesToWrite;</div>
<div class="line"><span class="lineno">  656</span>    <span class="keywordflow">if</span> (target &gt; targetEnd) {</div>
<div class="line"><span class="lineno">  657</span>      --source; <span class="comment">/* Back up source pointer! */</span></div>
<div class="line"><span class="lineno">  658</span>      target -= bytesToWrite; result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b">targetExhausted</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  659</span>    }</div>
<div class="line"><span class="lineno">  660</span>    <span class="keywordflow">switch</span> (bytesToWrite) { <span class="comment">/* note: everything falls through. */</span></div>
<div class="line"><span class="lineno">  661</span>      <span class="keywordflow">case</span> 4: *--target = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a>)((ch | byteMark) &amp; byteMask); ch &gt;&gt;= 6;</div>
<div class="line"><span class="lineno">  662</span>      <span class="keywordflow">case</span> 3: *--target = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a>)((ch | byteMark) &amp; byteMask); ch &gt;&gt;= 6;</div>
<div class="line"><span class="lineno">  663</span>      <span class="keywordflow">case</span> 2: *--target = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a>)((ch | byteMark) &amp; byteMask); ch &gt;&gt;= 6;</div>
<div class="line"><span class="lineno">  664</span>      <span class="keywordflow">case</span> 1: *--target = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a>) (ch | <a class="code hl_variable" href="../../d5/ddf/a00224.html#a84be1e52702338d8e7aaeb1c2da2b375">firstByteMark</a>[bytesToWrite]);</div>
<div class="line"><span class="lineno">  665</span>    }</div>
<div class="line"><span class="lineno">  666</span>    target += bytesToWrite;</div>
<div class="line"><span class="lineno">  667</span>  }</div>
<div class="line"><span class="lineno">  668</span>  *sourceStart = source;</div>
<div class="line"><span class="lineno">  669</span>  *targetStart = target;</div>
<div class="line"><span class="lineno">  670</span>  <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  671</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00119">conversionOK</a>, <a class="el" href="../../#l00285">firstByteMark</a>, <a class="el" href="../../#l00122">sourceIllegal</a>, <a class="el" href="../../#l00126">strictConversion</a>, and <a class="el" href="../../#l00121">targetExhausted</a>.</p>

</div>
</div>
<a id="a1ce7285764f13667e49e5bf10377b8b8" name="a1ce7285764f13667e49e5bf10377b8b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ce7285764f13667e49e5bf10377b8b8">&#9670;&#160;</a></span>icConvertUTF8toUTF16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a> icConvertUTF8toUTF16 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> **&#160;</td>
          <td class="paramname"><em>sourceStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> *&#160;</td>
          <td class="paramname"><em>sourceEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> **&#160;</td>
          <td class="paramname"><em>targetStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a> *&#160;</td>
          <td class="paramname"><em>targetEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  491</span>{</div>
<div class="line"><span class="lineno">  492</span>  <a class="code hl_enumeration" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a52ace604d4b4bfdbb02699abcdfc5856">conversionOK</a>;</div>
<div class="line"><span class="lineno">  493</span>  <span class="keyword">const</span> <a class="code hl_typedef" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a>* source = *sourceStart;</div>
<div class="line"><span class="lineno">  494</span>  <a class="code hl_typedef" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a>* target = *targetStart;</div>
<div class="line"><span class="lineno">  495</span>  <span class="keywordflow">while</span> (source &lt; sourceEnd) {</div>
<div class="line"><span class="lineno">  496</span>    <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> ch = 0;</div>
<div class="line"><span class="lineno">  497</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> extraBytesToRead = <a class="code hl_variable" href="../../d5/ddf/a00224.html#a2827254e79699e0e1a4ef1f510e2262a">trailingBytesForUTF8</a>[*source];</div>
<div class="line"><span class="lineno">  498</span>    <span class="keywordflow">if</span> (source + extraBytesToRead &gt;= sourceEnd) {</div>
<div class="line"><span class="lineno">  499</span>      result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8aab3cce3e3d047a29ab541a1284763223">sourceExhausted</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  500</span>    }</div>
<div class="line"><span class="lineno">  501</span>    <span class="comment">/* Do this check whether lenient or strict */</span></div>
<div class="line"><span class="lineno">  502</span>    <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../d5/ddf/a00224.html#a3a0d41e6f13988419ab99d6a14719a8c">isLegalUTF8</a>(source, extraBytesToRead+1)) {</div>
<div class="line"><span class="lineno">  503</span>      result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">  504</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  505</span>    }</div>
<div class="line"><span class="lineno">  506</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  507</span><span class="comment">    * The cases all fall through. See &quot;Note A&quot; below.</span></div>
<div class="line"><span class="lineno">  508</span><span class="comment">    */</span></div>
<div class="line"><span class="lineno">  509</span>    <span class="keywordflow">switch</span> (extraBytesToRead) {</div>
<div class="line"><span class="lineno">  510</span>      <span class="keywordflow">case</span> 5: ch += *source++; ch &lt;&lt;= 6; <span class="comment">/* remember, illegal UTF-8 */</span></div>
<div class="line"><span class="lineno">  511</span>      <span class="keywordflow">case</span> 4: ch += *source++; ch &lt;&lt;= 6; <span class="comment">/* remember, illegal UTF-8 */</span></div>
<div class="line"><span class="lineno">  512</span>      <span class="keywordflow">case</span> 3: ch += *source++; ch &lt;&lt;= 6;</div>
<div class="line"><span class="lineno">  513</span>      <span class="keywordflow">case</span> 2: ch += *source++; ch &lt;&lt;= 6;</div>
<div class="line"><span class="lineno">  514</span>      <span class="keywordflow">case</span> 1: ch += *source++; ch &lt;&lt;= 6;</div>
<div class="line"><span class="lineno">  515</span>      <span class="keywordflow">case</span> 0: ch += *source++;</div>
<div class="line"><span class="lineno">  516</span>    }</div>
<div class="line"><span class="lineno">  517</span>    ch -= <a class="code hl_variable" href="../../d5/ddf/a00224.html#af2f91e07d9adfd50e53dbbb38ba3245f">offsetsFromUTF8</a>[extraBytesToRead];</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>    <span class="keywordflow">if</span> (target &gt;= targetEnd) {</div>
<div class="line"><span class="lineno">  520</span>      source -= (extraBytesToRead+1); <span class="comment">/* Back up source pointer! */</span></div>
<div class="line"><span class="lineno">  521</span>      result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b">targetExhausted</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  522</span>    }</div>
<div class="line"><span class="lineno">  523</span>    <span class="keywordflow">if</span> (ch &lt;= <a class="code hl_define" href="../../d3/d00/a00113.html#adc71280d09832f0fb6c6b83fbf043140">UNI_MAX_BMP</a>) { <span class="comment">/* Target is a character &lt;= 0xFFFF */</span></div>
<div class="line"><span class="lineno">  524</span>      <span class="comment">/* UTF-16 surrogate values are illegal in UTF-32 */</span></div>
<div class="line"><span class="lineno">  525</span>      <span class="keywordflow">if</span> (ch &gt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#a4ab84eb26356a90f3b7b9ac7aca1edfe">UNI_SUR_HIGH_START</a> &amp;&amp; ch &lt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#ab9a531ffb73be79f7089049c1b84dc59">UNI_SUR_LOW_END</a>) {</div>
<div class="line"><span class="lineno">  526</span>        <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a>) {</div>
<div class="line"><span class="lineno">  527</span>          source -= (extraBytesToRead+1); <span class="comment">/* return to the illegal value itself */</span></div>
<div class="line"><span class="lineno">  528</span>          result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">  529</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  530</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  531</span>          *target++ = <a class="code hl_define" href="../../d3/d00/a00113.html#a44b240b95a93f71535c03f5e26d7dbe1">UNI_REPLACEMENT_CHAR</a>;</div>
<div class="line"><span class="lineno">  532</span>        }</div>
<div class="line"><span class="lineno">  533</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  534</span>        *target++ = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a>)ch; <span class="comment">/* normal case */</span></div>
<div class="line"><span class="lineno">  535</span>      }</div>
<div class="line"><span class="lineno">  536</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch &gt; <a class="code hl_define" href="../../d3/d00/a00113.html#a69d0ea77d1231214ba0893e846d7fcaf">UNI_MAX_UTF16</a>) {</div>
<div class="line"><span class="lineno">  537</span>      <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a>) {</div>
<div class="line"><span class="lineno">  538</span>        result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">  539</span>        source -= (extraBytesToRead+1); <span class="comment">/* return to the start */</span></div>
<div class="line"><span class="lineno">  540</span>        <span class="keywordflow">break</span>; <span class="comment">/* Bail out; shouldn&#39;t continue */</span></div>
<div class="line"><span class="lineno">  541</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  542</span>        *target++ = <a class="code hl_define" href="../../d3/d00/a00113.html#a44b240b95a93f71535c03f5e26d7dbe1">UNI_REPLACEMENT_CHAR</a>;</div>
<div class="line"><span class="lineno">  543</span>      }</div>
<div class="line"><span class="lineno">  544</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  545</span>      <span class="comment">/* target is a character in range 0xFFFF - 0x10FFFF. */</span></div>
<div class="line"><span class="lineno">  546</span>      <span class="keywordflow">if</span> (target + 1 &gt;= targetEnd) {</div>
<div class="line"><span class="lineno">  547</span>        source -= (extraBytesToRead+1); <span class="comment">/* Back up source pointer! */</span></div>
<div class="line"><span class="lineno">  548</span>        result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b">targetExhausted</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  549</span>      }</div>
<div class="line"><span class="lineno">  550</span>      ch -= <a class="code hl_variable" href="../../d5/ddf/a00224.html#a8e6fc083a9b22a0116b35c73a50b8c18">halfBase</a>;</div>
<div class="line"><span class="lineno">  551</span>      *target++ = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a>)((ch &gt;&gt; <a class="code hl_variable" href="../../d5/ddf/a00224.html#a9023510776bb97137517b59d39edbc3a">halfShift</a>) + <a class="code hl_define" href="../../d5/ddf/a00224.html#a4ab84eb26356a90f3b7b9ac7aca1edfe">UNI_SUR_HIGH_START</a>);</div>
<div class="line"><span class="lineno">  552</span>      *target++ = (<a class="code hl_typedef" href="../../d3/d00/a00113.html#a50b71724cb39637be87babb9ddbd5822">UTF16</a>)((ch &amp; <a class="code hl_variable" href="../../d5/ddf/a00224.html#a3eb375b25f02aaecedb92086ff2a7af3">halfMask</a>) + <a class="code hl_define" href="../../d5/ddf/a00224.html#a23de5862375b48afcb4e3ff7b56a274d">UNI_SUR_LOW_START</a>);</div>
<div class="line"><span class="lineno">  553</span>    }</div>
<div class="line"><span class="lineno">  554</span>  }</div>
<div class="line"><span class="lineno">  555</span>  *sourceStart = source;</div>
<div class="line"><span class="lineno">  556</span>  *targetStart = target;</div>
<div class="line"><span class="lineno">  557</span>  <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  558</span>}</div>
<div class="ttc" id="aa00113_html_a69d0ea77d1231214ba0893e846d7fcaf"><div class="ttname"><a href="../../d3/d00/a00113.html#a69d0ea77d1231214ba0893e846d7fcaf">UNI_MAX_UTF16</a></div><div class="ttdeci">#define UNI_MAX_UTF16</div><div class="ttdef"><b>Definition</b> IccConvertUTF.h:114</div></div>
<div class="ttc" id="aa00224_html_a2827254e79699e0e1a4ef1f510e2262a"><div class="ttname"><a href="../../d5/ddf/a00224.html#a2827254e79699e0e1a4ef1f510e2262a">trailingBytesForUTF8</a></div><div class="ttdeci">static const char trailingBytesForUTF8[256]</div><div class="ttdef"><b>Definition</b> IccConvertUTF.cpp:259</div></div>
<div class="ttc" id="aa00224_html_a3a0d41e6f13988419ab99d6a14719a8c"><div class="ttname"><a href="../../d5/ddf/a00224.html#a3a0d41e6f13988419ab99d6a14719a8c">isLegalUTF8</a></div><div class="ttdeci">static Boolean isLegalUTF8(const UTF8 *source, int length)</div><div class="ttdef"><b>Definition</b> IccConvertUTF.cpp:446</div></div>
<div class="ttc" id="aa00224_html_af2f91e07d9adfd50e53dbbb38ba3245f"><div class="ttname"><a href="../../d5/ddf/a00224.html#af2f91e07d9adfd50e53dbbb38ba3245f">offsetsFromUTF8</a></div><div class="ttdeci">static const UTF32 offsetsFromUTF8[6]</div><div class="ttdef"><b>Definition</b> IccConvertUTF.cpp:275</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00119">conversionOK</a>, <a class="el" href="../../#l00049">halfBase</a>, <a class="el" href="../../#l00050">halfMask</a>, <a class="el" href="../../#l00047">halfShift</a>, <a class="el" href="../../#l00446">isLegalUTF8()</a>, <a class="el" href="../../#l00275">offsetsFromUTF8</a>, <a class="el" href="../../#l00120">sourceExhausted</a>, <a class="el" href="../../#l00122">sourceIllegal</a>, <a class="el" href="../../#l00126">strictConversion</a>, <a class="el" href="../../#l00121">targetExhausted</a>, and <a class="el" href="../../#l00259">trailingBytesForUTF8</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00096">CIccUTF16String::CIccUTF16String()</a>, and <a class="el" href="../../#l00223">CIccUTF16String::FromUtf8()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/d00/a00113_a1ce7285764f13667e49e5bf10377b8b8_cgraph.png" border="0" usemap="#ad3/d00/a00113_a1ce7285764f13667e49e5bf10377b8b8_cgraph" alt=""/></div>
<map name="ad3/d00/a00113_a1ce7285764f13667e49e5bf10377b8b8_cgraph" id="ad3/d00/a00113_a1ce7285764f13667e49e5bf10377b8b8_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,179,31"/>
<area shape="rect" href="../../d5/ddf/a00224.html#a3a0d41e6f13988419ab99d6a14719a8c" title=" " alt="" coords="227,5,329,31"/>
<area shape="poly" title=" " alt="" coords="179,15,213,15,213,21,179,21"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/d00/a00113_a1ce7285764f13667e49e5bf10377b8b8_icgraph.png" border="0" usemap="#ad3/d00/a00113_a1ce7285764f13667e49e5bf10377b8b8_icgraph" alt=""/></div>
<map name="ad3/d00/a00113_a1ce7285764f13667e49e5bf10377b8b8_icgraph" id="ad3/d00/a00113_a1ce7285764f13667e49e5bf10377b8b8_icgraph">
<area shape="rect" title=" " alt="" coords="751,195,924,221"/>
<area shape="rect" href="../../db/ddd/a02089.html#a5209999d2313fd5b19d6832fb90ee9d5" title=" " alt="" coords="496,133,703,173"/>
<area shape="poly" title=" " alt="" coords="768,195,687,176,688,171,769,190"/>
<area shape="rect" href="../../db/ddd/a02089.html#a6974e5dc49b8069799812361ae3d764d" title=" " alt="" coords="500,249,699,274"/>
<area shape="poly" title=" " alt="" coords="767,226,657,251,656,246,766,221"/>
<area shape="rect" href="../../d7/db1/a01837.html#a90eeefd13346d44fe87970c91ca28287" title=" " alt="" coords="247,5,446,45"/>
<area shape="poly" title=" " alt="" coords="559,127,507,93,447,60,418,48,420,43,449,55,509,88,562,123"/>
<area shape="rect" href="../../d7/d9c/a01885.html#adcb1238d1761fc5a61a03df9bcdfa18e" title=" " alt="" coords="251,69,442,109"/>
<area shape="poly" title=" " alt="" coords="506,132,425,112,427,107,507,127"/>
<area shape="rect" href="../../d2/d23/a01961.html#afbaaee340011d5bd09960d699d352e14" title=" " alt="" coords="246,133,447,173"/>
<area shape="poly" title=" " alt="" coords="482,156,448,156,448,151,482,151"/>
<area shape="rect" href="../../d6/d9a/a01965.html#a88c29060c9f89f8b6033dcb3a535d4d4" title=" " alt="" coords="5,249,197,274"/>
<area shape="poly" title=" " alt="" coords="493,179,161,251,160,246,492,174"/>
<area shape="rect" href="../../d5/d35/a00266.html#a7e9c5de46dd2e23ed3ce85f7802cae12" title=" " alt="" coords="291,249,402,274"/>
<area shape="poly" title=" " alt="" coords="487,264,402,264,402,259,487,259"/>
<area shape="rect" href="../../db/ddd/a02089.html#a05e4b7cdf12723b5678b08107235a2bd" title=" " alt="" coords="245,298,448,323"/>
<area shape="poly" title=" " alt="" coords="521,279,413,301,412,295,520,274"/>
<area shape="poly" title=" " alt="" coords="269,298,165,277,166,271,270,293"/>
</map>
</div>

</div>
</div>
<a id="a3019c94f47fdbae93211314adb1beebd" name="a3019c94f47fdbae93211314adb1beebd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3019c94f47fdbae93211314adb1beebd">&#9670;&#160;</a></span>icConvertUTF8toUTF32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a> icConvertUTF8toUTF32 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> **&#160;</td>
          <td class="paramname"><em>sourceStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> *&#160;</td>
          <td class="paramname"><em>sourceEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> **&#160;</td>
          <td class="paramname"><em>targetStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> *&#160;</td>
          <td class="paramname"><em>targetEnd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbb">icUtfConversionFlags</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  725</span>{</div>
<div class="line"><span class="lineno">  726</span>  <a class="code hl_enumeration" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8">icUtfConversionResult</a> result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a52ace604d4b4bfdbb02699abcdfc5856">conversionOK</a>;</div>
<div class="line"><span class="lineno">  727</span>  <span class="keyword">const</span> <a class="code hl_typedef" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a>* source = *sourceStart;</div>
<div class="line"><span class="lineno">  728</span>  <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a>* target = *targetStart;</div>
<div class="line"><span class="lineno">  729</span>  <span class="keywordflow">while</span> (source &lt; sourceEnd) {</div>
<div class="line"><span class="lineno">  730</span>    <a class="code hl_typedef" href="../../d3/d00/a00113.html#a712315a25692d905402a2f4db0ed622d">UTF32</a> ch = 0;</div>
<div class="line"><span class="lineno">  731</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> extraBytesToRead = <a class="code hl_variable" href="../../d5/ddf/a00224.html#a2827254e79699e0e1a4ef1f510e2262a">trailingBytesForUTF8</a>[*source];</div>
<div class="line"><span class="lineno">  732</span>    <span class="keywordflow">if</span> (source + extraBytesToRead &gt;= sourceEnd) {</div>
<div class="line"><span class="lineno">  733</span>      result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8aab3cce3e3d047a29ab541a1284763223">sourceExhausted</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  734</span>    }</div>
<div class="line"><span class="lineno">  735</span>    <span class="comment">/* Do this check whether lenient or strict */</span></div>
<div class="line"><span class="lineno">  736</span>    <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../d5/ddf/a00224.html#a3a0d41e6f13988419ab99d6a14719a8c">isLegalUTF8</a>(source, extraBytesToRead+1)) {</div>
<div class="line"><span class="lineno">  737</span>      result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">  738</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  739</span>    }</div>
<div class="line"><span class="lineno">  740</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  741</span><span class="comment">    * The cases all fall through. See &quot;Note A&quot; below.</span></div>
<div class="line"><span class="lineno">  742</span><span class="comment">    */</span></div>
<div class="line"><span class="lineno">  743</span>    <span class="keywordflow">switch</span> (extraBytesToRead) {</div>
<div class="line"><span class="lineno">  744</span>      <span class="keywordflow">case</span> 5: ch += *source++; ch &lt;&lt;= 6;</div>
<div class="line"><span class="lineno">  745</span>      <span class="keywordflow">case</span> 4: ch += *source++; ch &lt;&lt;= 6;</div>
<div class="line"><span class="lineno">  746</span>      <span class="keywordflow">case</span> 3: ch += *source++; ch &lt;&lt;= 6;</div>
<div class="line"><span class="lineno">  747</span>      <span class="keywordflow">case</span> 2: ch += *source++; ch &lt;&lt;= 6;</div>
<div class="line"><span class="lineno">  748</span>      <span class="keywordflow">case</span> 1: ch += *source++; ch &lt;&lt;= 6;</div>
<div class="line"><span class="lineno">  749</span>      <span class="keywordflow">case</span> 0: ch += *source++;</div>
<div class="line"><span class="lineno">  750</span>    }</div>
<div class="line"><span class="lineno">  751</span>    ch -= <a class="code hl_variable" href="../../d5/ddf/a00224.html#af2f91e07d9adfd50e53dbbb38ba3245f">offsetsFromUTF8</a>[extraBytesToRead];</div>
<div class="line"><span class="lineno">  752</span> </div>
<div class="line"><span class="lineno">  753</span>    <span class="keywordflow">if</span> (target &gt;= targetEnd) {</div>
<div class="line"><span class="lineno">  754</span>      source -= (extraBytesToRead+1); <span class="comment">/* Back up the source pointer! */</span></div>
<div class="line"><span class="lineno">  755</span>      result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a22d7628029ab488395e9802cc21d3d1b">targetExhausted</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  756</span>    }</div>
<div class="line"><span class="lineno">  757</span>    <span class="keywordflow">if</span> (ch &lt;= <a class="code hl_define" href="../../d3/d00/a00113.html#a98a2f50a1ca513613316ffd384dd1bfb">UNI_MAX_LEGAL_UTF32</a>) {</div>
<div class="line"><span class="lineno">  758</span>      <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  759</span><span class="comment">      * UTF-16 surrogate values are illegal in UTF-32, and anything</span></div>
<div class="line"><span class="lineno">  760</span><span class="comment">      * over Plane 17 (&gt; 0x10FFFF) is illegal.</span></div>
<div class="line"><span class="lineno">  761</span><span class="comment">      */</span></div>
<div class="line"><span class="lineno">  762</span>      <span class="keywordflow">if</span> (ch &gt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#a4ab84eb26356a90f3b7b9ac7aca1edfe">UNI_SUR_HIGH_START</a> &amp;&amp; ch &lt;= <a class="code hl_define" href="../../d5/ddf/a00224.html#ab9a531ffb73be79f7089049c1b84dc59">UNI_SUR_LOW_END</a>) {</div>
<div class="line"><span class="lineno">  763</span>        <span class="keywordflow">if</span> (flags == <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#afdfb6f5dac09ba1b8e138ad4f3a0abbba204e76a6d941d3c151696d05abeacd40">strictConversion</a>) {</div>
<div class="line"><span class="lineno">  764</span>          source -= (extraBytesToRead+1); <span class="comment">/* return to the illegal value itself */</span></div>
<div class="line"><span class="lineno">  765</span>          result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">  766</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  767</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  768</span>          *target++ = <a class="code hl_define" href="../../d3/d00/a00113.html#a44b240b95a93f71535c03f5e26d7dbe1">UNI_REPLACEMENT_CHAR</a>;</div>
<div class="line"><span class="lineno">  769</span>        }</div>
<div class="line"><span class="lineno">  770</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  771</span>        *target++ = ch;</div>
<div class="line"><span class="lineno">  772</span>      }</div>
<div class="line"><span class="lineno">  773</span>    } <span class="keywordflow">else</span> { <span class="comment">/* i.e., ch &gt; UNI_MAX_LEGAL_UTF32 */</span></div>
<div class="line"><span class="lineno">  774</span>      result = <a class="code hl_enumvalue" href="../../d3/d00/a00113.html#a857080450603c118c1f820f96e2c61d8a42f7df28717a1aaf7cbb89c8d907b631">sourceIllegal</a>;</div>
<div class="line"><span class="lineno">  775</span>      *target++ = <a class="code hl_define" href="../../d3/d00/a00113.html#a44b240b95a93f71535c03f5e26d7dbe1">UNI_REPLACEMENT_CHAR</a>;</div>
<div class="line"><span class="lineno">  776</span>    }</div>
<div class="line"><span class="lineno">  777</span>  }</div>
<div class="line"><span class="lineno">  778</span>  *sourceStart = source;</div>
<div class="line"><span class="lineno">  779</span>  *targetStart = target;</div>
<div class="line"><span class="lineno">  780</span>  <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  781</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00119">conversionOK</a>, <a class="el" href="../../#l00446">isLegalUTF8()</a>, <a class="el" href="../../#l00275">offsetsFromUTF8</a>, <a class="el" href="../../#l00120">sourceExhausted</a>, <a class="el" href="../../#l00122">sourceIllegal</a>, <a class="el" href="../../#l00126">strictConversion</a>, <a class="el" href="../../#l00121">targetExhausted</a>, and <a class="el" href="../../#l00259">trailingBytesForUTF8</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/d00/a00113_a3019c94f47fdbae93211314adb1beebd_cgraph.png" border="0" usemap="#ad3/d00/a00113_a3019c94f47fdbae93211314adb1beebd_cgraph" alt=""/></div>
<map name="ad3/d00/a00113_a3019c94f47fdbae93211314adb1beebd_cgraph" id="ad3/d00/a00113_a3019c94f47fdbae93211314adb1beebd_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,179,31"/>
<area shape="rect" href="../../d5/ddf/a00224.html#a3a0d41e6f13988419ab99d6a14719a8c" title=" " alt="" coords="227,5,329,31"/>
<area shape="poly" title=" " alt="" coords="179,15,213,15,213,21,179,21"/>
</map>
</div>

</div>
</div>
<a id="a1a2dad2f752ad41ae129928da0d80f5f" name="a1a2dad2f752ad41ae129928da0d80f5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a2dad2f752ad41ae129928da0d80f5f">&#9670;&#160;</a></span>icIsLegalUTF8Sequence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d00/a00113.html#adaac7155d04f98cee33773208b61f3f8">Boolean</a> <a class="el" href="../../d5/d16/a00029.html#a82966d668ed6bdc39656fdabcf084956">ICCPROFLIB_API</a> icIsLegalUTF8Sequence </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d3/d00/a00113.html#aafe543c40e242c865f970b57a29122ab">UTF8</a> *&#160;</td>
          <td class="paramname"><em>sourceEnd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  479</span>{</div>
<div class="line"><span class="lineno">  480</span>  <span class="keywordtype">int</span> length = <a class="code hl_variable" href="../../d5/ddf/a00224.html#a2827254e79699e0e1a4ef1f510e2262a">trailingBytesForUTF8</a>[*source]+1;</div>
<div class="line"><span class="lineno">  481</span>  <span class="keywordflow">if</span> (source+length &gt; sourceEnd) {</div>
<div class="line"><span class="lineno">  482</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  483</span>  }</div>
<div class="line"><span class="lineno">  484</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="../../d5/ddf/a00224.html#a3a0d41e6f13988419ab99d6a14719a8c">isLegalUTF8</a>(source, length);</div>
<div class="line"><span class="lineno">  485</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00446">isLegalUTF8()</a>, and <a class="el" href="../../#l00259">trailingBytesForUTF8</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d3/d00/a00113_a1a2dad2f752ad41ae129928da0d80f5f_cgraph.png" border="0" usemap="#ad3/d00/a00113_a1a2dad2f752ad41ae129928da0d80f5f_cgraph" alt=""/></div>
<map name="ad3/d00/a00113_a1a2dad2f752ad41ae129928da0d80f5f_cgraph" id="ad3/d00/a00113_a1a2dad2f752ad41ae129928da0d80f5f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,181,31"/>
<area shape="rect" href="../../d5/ddf/a00224.html#a3a0d41e6f13988419ab99d6a14719a8c" title=" " alt="" coords="229,5,332,31"/>
<area shape="poly" title=" " alt="" coords="182,15,216,15,216,21,182,21"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_d77fd0a8c197a6b09c227b53322d11bd.html">IccProfLib</a></li><li class="navelem"><a class="el" href="../../d3/d00/a00113.html">IccConvertUTF.h</a></li>
    <li class="footer">Generated on Wed Jul 30 2025 15:11:11 for iccDEV by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
